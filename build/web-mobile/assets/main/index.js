System.register("chunks:///_virtual/ActorBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,c,a,o,i,s,u;return{setters:[function(e){t=e.inherits,r=e.createSuper,n=e.createClass,c=e.classCallCheck,a=e.defineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,u=e.Component}],execute:function(){var l;i._RF.push({},"3836bqT2z9K9ZwuEZQ3ct3R","ActorBase",void 0);var p=s.ccclass;s.property,e("ActorBase",p("ActorBase")(l=function(e){t(s,e);var i=r(s);function s(){var e;c(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=i.call.apply(i,[this].concat(r)),a(o(e),"actorType",void 0),e}return n(s,[{key:"init",value:function(e){}},{key:"register",value:function(){}},{key:"onHitten",value:function(e,t,r){}}]),s}(u))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationClipManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./PrefabConfig.ts","./AnimationType.ts"],(function(n){var e,t,i,a,r,o,s,c,u,l,f,p;return{setters:[function(n){e=n.defineProperty,t=n.createClass,i=n.classCallCheck,a=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){o=n.cclegacy,s=n._decorator,c=n.NodePool,u=n.isValid},function(n){l=n.UIManager},function(n){f=n.PrefabConfig},function(n){p=n.AnimationClipNames}],execute:function(){var m,h;o._RF.push({},"fe16dH6lk5OyarUJmL8TtM1","AnimationClipManager",void 0);var g=s.ccclass;n("AnimationClipManager",g("AnimationClipManager")((h=function(){function n(){i(this,n),e(this,"animationList",[]),e(this,"poolList",new Map),e(this,"animationArr",[])}var o,s;return t(n,[{key:"clear",value:function(){}},{key:"init",value:(s=a(r().mark((function n(){var e,t,i,a,o,s;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(e in p)this.animationList.push(e);t=0;case 2:if(!(t<this.animationList.length)){n.next=18;break}i=this.animationList[t],a=new c(i),this.poolList.set(i,a),o=0;case 7:if(!(o<10)){n.next=15;break}return n.next=10,this._createNewAnimation(i);case 10:(s=n.sent)&&a.put(s);case 12:o++,n.next=7;break;case 15:t++,n.next=2;break;case 18:console.log("AnimationClipManager init finished :");case 19:case"end":return n.stop()}}),n,this)}))),function(){return s.apply(this,arguments)})},{key:"_getNodePool",value:function(n){return this.poolList.has(n)?this.poolList.get(n):null}},{key:"_createNewAnimation",value:function(n){return l.instance.getPrefab(f[n])}},{key:"getAnimation",value:(o=a(r().mark((function n(e){var t,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=this._getNodePool(e))){n.next=12;break}if(!(t.size()>0)){n.next=6;break}i=t.get(),n.next=9;break;case 6:return n.next=8,this._createNewAnimation(e);case 8:i=n.sent;case 9:if(!i||!u(i)){n.next=12;break}return this.animationArr.push(i),n.abrupt("return",i);case 12:case"end":return n.stop()}}),n,this)}))),function(n){return o.apply(this,arguments)})},{key:"putAnimation",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.name;if(e===n.name){var t=this._getNodePool(n.name);t&&(this.animationArr.splice(this.animationArr.indexOf(n),1),t.put(n))}else console.error("animationName !== animation.name, it may cause wrong nodePool, please check!!!")}}],[{key:"getInstance",value:function(){return null==n.instance&&(n.instance=new n),n.instance}}]),n}(),e(h,"instance",null),m=h))||m);o._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationType.ts",["cc"],(function(u){var t;return{setters:[function(u){t=u.cclegacy}],execute:function(){t._RF.push({},"693e8y7B1tFw5wzLn2mF5lu","AnimationType",void 0);u("AnimationClipNames",function(u){return u.HeroBulletHit="HeroBulletHit",u.IBomb="IBomb",u.SkillBomb="SkillBomb",u.BBomb="BBomb",u.BugBomb="BugBomb",u.MonsterBulletHit="MonsterBulletHit",u.WeaponUp="WeaponUp",u.HpUp="HpUp",u}({})),u("TweenType",function(u){return u.linear="linear",u.smooth="smooth",u.fade="fade",u.constant="constant",u.quadIn="quadIn",u.quadOut="quadOut",u.quadInOut="quadInOut",u.quadOutIn="quadOutIn",u.cubicIn="cubicIn",u.cubicOut="cubicOut",u.cubicInOut="cubicInOut",u.cubicOutIn="cubicOutIn",u.quartIn="quartIn",u.quartOut="quartOut",u.quardInOut="quardInOut",u.quartOutIn="quartOutIn",u.quintIn="quintIn",u.quintOut="quintOut",u.quintInOut="quardInOut",u.quintOutIn="quintOutIn",u.sineIn="sineIn",u.sineOut="sineOut",u.sineInOut="sineInOut",u.sineOutIn="sineOutIn",u.expoIn="expoIn",u.expoOut="expoOut",u.expoInOut="expoInOut",u.expoOutIn="expoOutIn",u.circIn="circIn",u.circOut="circOut",u.circInOut="circInOut",u.circOutIn="circOutIn",u.elasticIn="elasticIn",u.elasticOut="elasticOut",u.elasticInOut="elasticInOut",u.elasticOutIn="elasticOutIn",u.backIn="backIn",u.backOut="backOut",u.backInOut="backInOut",u.backOutIn="backOutIn",u.bounceIn="bounceIn",u.bounceOut="bounceOut",u.bounceInOut="bounceInOut",u.bounceOutIn="bounceOutIn",u}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadManager.ts","./PrefabConfig.ts"],(function(e){var t,o,n,a,i,s,u,r,c,l,d,p,h,_,f;return{setters:[function(e){t=e.defineProperty,o=e.createClass,n=e.classCallCheck,a=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,u=e._decorator,r=e.Button,c=e.AudioClip,l=e.find,d=e.AudioSource,p=e.director},function(e){h=e.LoadManager,_=e.BundleNames},function(e){f=e.AssetsConfig}],execute:function(){var b,y;s._RF.push({},"6d53aUArnFAn7pcmT3b9VeH","AudioManager",void 0);var g=u.ccclass,v=(u.property,e("AudioNames",function(e){return e.baozou="baozou",e.blood_cure="blood_cure",e.explode_boss="explode_boss",e.explode_captain="explode_captain",e.explode_skill="explode_skill",e.explode_small="explode_small",e.weapon_up="weapon_up",e.hero_appear="hero_appear",e.battle_bk1="battle_bk1",e.battle_lose="battle_lose",e.battle_win="battle_win",e.boss_come="boss_come",e}({})));e("AudioManager",g("AudioManager")((y=function(){function e(){n(this,e),t(this,"audioSource",void 0),t(this,"isCloseMusic",!1),t(this,"isCloseEffect",!1),t(this,"soundList",new Map)}var s;return o(e,[{key:"init",value:(s=a(i().mark((function e(){var t,o,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l("Canvas/Audio"),this.audioSource=t.getComponent(d),p.addPersistRootNode(t),e.t0=i().keys(v);case 4:if((e.t1=e.t0()).done){e.next=12;break}return o=e.t1.value,e.next=8,h.instance.loadAssetFromBundle(_.BundleBattle,f[o].path,c);case 8:n=e.sent,this.soundList.set(o,n),e.next=4;break;case 12:if(console.log("AudioManager init finished"),this.playMusic(v.battle_bk1),!r.prototype.touchBeganClone){e.next=16;break}return e.abrupt("return");case 16:r.prototype.touchBeganClone=r.prototype._onTouchEnded,r.prototype._onTouchEnded=function(e){this.interactable&&this.enabledInHierarchy,this.touchBeganClone(e)};case 18:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"playOneShot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=this.soundList.get(e);this.audioSource.playOneShot(o,t)}},{key:"playMusic",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.audioSource.unscheduleAllCallbacks(),this.audioSource.clip=this.soundList.get(e),this.audioSource.play(),this.audioSource.volume=o,this.audioSource.scheduleOnce((function(){t.audioSource.play()}),this.audioSource.duration)}},{key:"stop",value:function(){this.audioSource.stop()}},{key:"pause",value:function(){this.audioSource.pause()}},{key:"resume",value:function(){this.audioSource.play()}}],[{key:"instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}(),t(y,"_instance",null),b=y))||b);s._RF.pop()}}}));

System.register("chunks:///_virtual/BattleController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleModule.ts","./Tools.ts","./Bullets.ts","./ClientEventManager.ts","./ClientEventList.ts","./AnimationClipManager.ts","./AnimationType.ts","./BattleType.ts","./UIManager.ts","./PrefabConfig.ts","./NodeMonster.ts","./BulletFactory.ts","./Main.ts","./NodeHero.ts","./BattleProps.ts","./NodeBoss.ts","./AudioManager.ts","./PlayableHtml.ts"],(function(e){var t,n,o,i,s,a,r,l,h,u,c,p,d,v,g,f,m,y,B,w,P,k,M,C,S,b,T,H,A,O,x,R,D,E,F,_,N,I,L,Z,U,z,V,G;return{setters:[function(e){t=e.createClass,n=e.classCallCheck,o=e.defineProperty,i=e.createForOfIteratorHelper,s=e.toConsumableArray,a=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){l=e.cclegacy,h=e._decorator,u=e.Vec2,c=e.NodePool,p=e.Node,d=e.Vec3,v=e.isValid,g=e.BoxCollider2D,f=e.Sprite,m=e.UITransform,y=e.Tween,B=e.tween,w=e.Animation,P=e.UIOpacity,k=e.ProgressBar},function(e){M=e.BattleModule},function(e){C=e.Tools},function(e){S=e.Bullets},function(e){b=e.ClientEventManager},function(e){T=e.ClientEventList},function(e){H=e.AnimationClipManager},function(e){A=e.TweenType,O=e.AnimationClipNames},function(e){x=e.PropsType,R=e.HeroTypeEnum,D=e.BulletOwnerType},function(e){E=e.UIManager},function(e){F=e.PrefabConfig},function(e){_=e.NodeMonster},function(e){N=e.BulletFactory},function(e){I=e.Main},function(e){L=e.NodeHero},function(e){Z=e.BattleProps},function(e){U=e.NodeBoss},function(e){z=e.AudioManager,V=e.AudioNames},function(e){G=e.default}],execute:function(){var j;l._RF.push({},"3cde8K37sFHjLiaOy8rD9sC","BattleController",void 0);var q=h.ccclass;h.property,e("BattleController",q("BattleController")(j=function(){function e(t){n(this,e),o(this,"view",void 0),o(this,"bulletFactory",void 0),o(this,"mission",void 0),o(this,"copyMissionData",null),o(this,"isPause",!1),o(this,"touchPos",u.ZERO),o(this,"preTouchPos",u.ZERO),o(this,"runningTime",0),o(this,"creatingTime",0),o(this,"countDown",3),o(this,"isCountDownFinish",!1),o(this,"currentPlaneType",0),o(this,"enemyBulletPools",new Map),o(this,"heroBulletsPool",new Map),o(this,"heroMainBulletArr",[]),o(this,"isBulletPause",!1),o(this,"monsterList",0),o(this,"bulletTimeMap",[]),o(this,"frameAngle",0),o(this,"frameAngleSpeed",1),o(this,"oppositeFrameAngle",0),o(this,"oppositeFrameAngleSpeed",1),this.view=t,this.bulletFactory=new N(this),this.mission="mission2";var a,r=i(M.missionType[this.mission].enemyBullets);try{for(r.s();!(a=r.n()).done;){var l=a.value;this.enemyBulletPools.set(l,new c(l))}}catch(e){r.e(e)}finally{r.f()}for(var h in M.startMapMoveSpeed=1,M.startWaitTime=1,M.battleMapMoveSpeed=50,M.bulletType)if(M.bulletType.hasOwnProperty(h)){for(var p=[],d=M.bulletType[h],v=0;v<d.length;v++){p.push(0);var g=this.getHeroBulletPoolName(h,v);null==this.heroBulletsPool.get(g)&&this.heroBulletsPool.set(g,new c(g))}this.bulletTimeMap.push(p)}if(!this.copyMissionData){this.copyMissionData=C.deepClone(M.missionType[this.mission]);var f=this.copyMissionData.monster;this.copyMissionData.monster=function e(t){if(t.length<=1)return t;for(var n=Math.floor(t.length/2),o=t[n],i=[],a=[],r=0;r<t.length;r++)r!==n&&(t[r].time<o.time?i.push(t[r]):a.push(t[r]));return[].concat(s(e(i)),[o],s(e(a)))}(f)}}var l,h,j,q,W,Y;return t(e,[{key:"getHeroBulletPoolName",value:function(e,t){return"heroBullet_"+e+"_"+t}},{key:"start",value:function(){var e=this;this.pauseBulletShoot(),this.view.touchZone.on(p.EventType.TOUCH_START,this.onTouchStart,this),this.view.touchZone.on(p.EventType.TOUCH_MOVE,this.onTouchMove,this),this.view.nodePauseBtn.on(p.EventType.TOUCH_START,(function(){e.isPause||e.isCountDownFinish&&e.onSetPause(!0)}),this),this.view.nodeClosePause.on(p.EventType.TOUCH_START,this.onSetPause,this),this.view.nodeBattleSkill.on(p.EventType.TOUCH_START,(function(){e.isPause||e.isCountDownFinish&&e.onclickBattleSkill()}),this),this.view.nodeRetryBtn.on(p.EventType.TOUCH_START,this.onclickRetry,this),this.view.nodeDownloadBtn.on(p.EventType.TOUCH_START,this.onclickDownload,this),b.on(T.Battle.end,this.onBattleEnd,this),b.on(T.Bullet.hit,this.onBulletHit,this),b.on(T.Boss.hittenResp,this.onBossHittenResp,this),b.on(T.Boss.ready,this.onBossReady,this),b.on(T.Monster.hittenResp,this.onMonsterHittenResp,this),b.on(T.Hero.strike,this.onHeroStrike,this),b.on(T.Monster.attack,this.onEnemyAttack,this),b.on(T.Boss.attack,this.onEnemyAttack,this),b.on(T.Hero.dead,this.onHeroDead,this),b.on(T.Prop.touch,this.onTouchProp,this),b.on(T.Hero.reset,this.onHeroReset,this),this.view.updateCountDown(this.countDown,(function(){z.instance.playOneShot(V.hero_appear),e.isCountDownFinish=!0}))}},{key:"onDestroy",value:function(){b.off(T.Battle.end,this.onBattleEnd,this),b.off(T.Bullet.hit,this.onBulletHit,this),b.off(T.Boss.hittenResp,this.onBossHittenResp,this),b.off(T.Monster.hittenResp,this.onMonsterHittenResp,this),b.off(T.Monster.attack,this.onEnemyAttack,this),b.off(T.Boss.attack,this.onEnemyAttack,this),b.off(T.Boss.ready,this.onBossReady,this),b.off(T.Hero.strike,this.onHeroStrike,this),b.off(T.Hero.dead,this.onHeroDead,this),b.off(T.Prop.touch,this.onTouchProp,this),b.off(T.Hero.reset,this.onHeroReset,this),this.heroBulletsPool.clear(),this.enemyBulletPools.clear(),M.hitLabelPool.clear()}},{key:"onTouchStart",value:function(e){this.isPause||this.isCountDownFinish&&(this.touchPos=e.getUILocation(),this.preTouchPos=e.getUILocation())}},{key:"onTouchMove",value:function(e){if(!this.isPause&&this.isCountDownFinish){this.touchPos=e.getUILocation();var t=this.touchPos.x-this.preTouchPos.x,n=this.touchPos.y-this.preTouchPos.y;this.checkPlaneMoveSpec(this.view.plane.getPosition(),t,n)&&(this.view.plane.setPosition(new d(this.view.plane.position.x+t,this.view.plane.position.y+n)),this.preTouchPos=this.touchPos)}}},{key:"onclickBattleSkill",value:(Y=a(r().mark((function e(){var t,n,o,i,s,a,l,h,u=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isBulletPause){e.next=2;break}return e.abrupt("return");case 2:z.instance.playOneShot(V.explode_skill),B(this.view.nodeBattleSkill.getComponent(k)).call((function(){u.view.nodeBattleSkill.getChildByPath("bar").active=!0,u.view.nodeBattleSkill.getComponent(f).grayscale=!0})).set({progress:1}).to(M.skillBombCD,{progress:0}).call((function(){u.view.nodeBattleSkill.getChildByPath("bar").active=!1,u.view.nodeBattleSkill.getComponent(f).grayscale=!1})).start(),C.screenShake(15),t=M.BattleViewSize,n=t.height/4,o=t.width/4,i=0,s=1;case 11:if(!(s>=-1)){e.next=23;break}a=r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.getInstance().getAnimation(O.SkillBomb);case 2:(t=e.sent).parent=u.view.node,t.setPosition(new d(o*l,n*s)),u.view.scheduleOnce((function(){t.getComponent(w).play()}),.3*i);case 6:case"end":return e.stop()}}),e)})),l=-1;case 14:if(!(l<=1)){e.next=19;break}return e.delegateYield(a(),"t0",16);case 16:l++,e.next=14;break;case 19:i++;case 20:s--,e.next=11;break;case 23:h={damage:M.skillType.bbomb.atk,isCrit:!0},b.dispatchEvent(T.Boss.hitten,h),this.destroyAllMonsters(),this.detroyAllBullets();case 27:case"end":return e.stop()}}),e,this)}))),function(){return Y.apply(this,arguments)})},{key:"onSetPause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isPause=!this.isPause,1==this.isPause?z.instance.pause():z.instance.resume(),I.getInstance().isLogicRunning=!I.getInstance().isLogicRunning,e&&this.view.setPause(this.isPause)}},{key:"onBattleEnd",value:function(e,t,n){var o=this;this.pauseBulletShoot(),this.detroyAllBullets(),C.screenShake(40,2);for(var i=function(e){o.view.scheduleOnce(a(r().mark((function i(){var s,a,l;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=new d(t.position.x+Math.random()*t.width-t.width/2,t.position.y+Math.random()*t.height-t.height/2),i.next=3,H.getInstance().getAnimation(O.IBomb);case 3:if((a=i.sent)&&(a.parent=o.view.nodeMonsterZone,a.setPosition(s),z.instance.playOneShot(V.explode_boss),a.getComponent(w).play()),9!=e){i.next=14;break}return B(n.getComponent(P)).to(.5,{opacity:0}).call((function(){n.destroy()})).start(),i.next=9,H.getInstance().getAnimation(O.BBomb);case 9:(l=i.sent).parent=o.view.nodeMonsterZone,l.setPosition(t.position),l.getComponent(w).play(),o.view.scheduleOnce((function(){z.instance.playOneShot(V.battle_win),B(o.view.top).by(.3,{position:new d(0,300)}).start(),B(o.view.left).by(.3,{position:new d(-300,0)}).start(),o.view.planeCharge.active=!0,o.view.scheduleOnce((function(){B(o.view.plane).by(1,{position:new d(0,M.BattleViewSize.height+300)},{easing:A.sineIn}).call((function(){o.view.nodeGameOver.active=!0,G.game_end()})).start()}),.5)}),.5);case 14:case"end":return i.stop()}}),i)}))),.2*e)},s=0;s<10;s++)i(s)}},{key:"onBulletHit",value:(W=a(r().mark((function e(t,n,o){var i,s,a,l,h,u,c,p,v,g,f,y,B,P,k;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.node,s=i.getComponent(S),a=i.getComponent(m),l=function(){return"NodeBoss"===o.node.name.substring(0,8)?new d(i.position.x+Math.random()*a.width-a.width/2,i.position.y+a.height/2+70*Math.random()):"NodeMonster"===o.node.name.substring(0,11)?new d(o.node.position.x+Math.random()*o.node.getComponent(m).width/2-o.node.getComponent(m).width/4,o.node.position.y+Math.random()*o.node.getComponent(m).height/2-o.node.getComponent(m).height/4):"NodeHero"===o.node.name.substring(0,8)?i.position:void 0},h=C.getRandomValue(s.bulletData.atk[0],s.bulletData.atk[1]),u=M.checkCrit(h,s.bulletData.atk[0],s.bulletData.atk[1]),(c={damage:h,isCrit:u}).isCrit&&C.screenShake(3),"NodeHero"!==o.node.name.substring(0,8)||i.getComponent(S).bulletOwnerType!=D.MONSTER){e.next=20;break}return p=s.bulletData.atk,v=C.getRandomValue(p[0],p[1]),g={damage:v,isCrit:!1},this.onHeroStrike(T.Hero.strike,o.node.getComponent(L).getHealthProgress(g)),this.putBullet(this.enemyBulletPools.get(s.bulletName),i),e.next=16,H.getInstance().getAnimation(O.MonsterBulletHit);case 16:(f=e.sent).parent=this.view.node,f.setPosition(l()),f.getComponent(w).play(O.MonsterBulletHit);case 20:if("NodeBoss"!==o.node.name.substring(0,8)||i.getComponent(S).bulletOwnerType!=D.HERO){e.next=35;break}b.dispatchEvent(T.Boss.hitten,c,l()),Math.random()<.5?z.instance.playOneShot(V.explode_small):z.instance.playOneShot(V.explode_captain),this.putBullet(s.fromPool,i),y=0;case 25:if(!(y<4)){e.next=35;break}return e.next=28,H.getInstance().getAnimation(O.HeroBulletHit);case 28:(B=e.sent).parent=this.view.node,B.setPosition(l()),B.getComponent(w).play(O.HeroBulletHit);case 32:y++,e.next=25;break;case 35:if("NodeMonster"!==o.node.name.substring(0,11)||i.getComponent(S).bulletOwnerType!=D.HERO){e.next=46;break}return P=o.node.getComponent(_).uniqueId,b.dispatchEvent(T.Monster.hitten,c,l(),P),z.instance.playOneShot(V.explode_small),this.putBullet(s.fromPool,i),e.next=42,H.getInstance().getAnimation(O.HeroBulletHit);case 42:(k=e.sent).parent=this.view.node,k.setPosition(l()),k.getComponent(w).play(O.HeroBulletHit);case 46:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return W.apply(this,arguments)})},{key:"onHeroStrike",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.view.setHeroHpProgress(t),n&&(this.view.showHeroHit(!0),C.screenShake(5))}},{key:"onHeroDead",value:(q=a(r().mark((function e(t,n){var o,i=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gameOver(),z.instance.playOneShot(V.explode_boss),e.next=4,H.getInstance().getAnimation(O.BBomb);case 4:(o=e.sent).parent=this.view.node,o.setPosition(n.position),o.getComponent(w).play(),B(n.getComponent(P)).to(.3,{opacity:0}).call((function(){n.active=!1,i.view.nodeGameOver.active=!0,z.instance.playOneShot(V.battle_lose),i.detroyAllBullets(),G.game_end()})).start();case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return q.apply(this,arguments)})},{key:"onTouchProp",value:function(e,t,n){switch(t){case x.WeaponUp:z.instance.playOneShot(V.weapon_up),this.currentPlaneType=this.currentPlaneType<R.heroType3?this.currentPlaneType+1:R.heroType3,b.dispatchEvent(T.Hero.changeState,this.currentPlaneType);break;case x.HpUp:z.instance.playOneShot(V.blood_cure),b.dispatchEvent(T.Hero.restoreHp)}n.destroy()}},{key:"onHeroReset",value:function(e,t){this.currentPlaneType=t}},{key:"gameOver",value:function(){this.onSetPause(!1),this.detroyAllBullets()}},{key:"detroyAllBullets",value:function(){for(var e=0;e<this.view.nodeBulletZone.children.length;e++){var t=this.view.nodeBulletZone.children[e];if(t&&v(t)){var n=t.getComponent(S).fromPool;n&&this.putBullet(n,t)}}this.view.nodeBulletZone.destroyAllChildren()}},{key:"destroyAllMonsters",value:function(){for(var e=0;e<this.view.nodeMonsterZone.children.length;e++){var t=this.view.nodeMonsterZone.children[e];if(t&&v(t)){var n=t.getComponent(_);t.getComponent(U);if(n){var o={damage:n.totalHealth,isCrit:!1};b.dispatchEvent(T.Monster.hitten,o,t.getPosition(),n.uniqueId)}}}}},{key:"onBossReady",value:(j=a(r().mark((function e(t,n){var o=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C.setString(this.view.labelBossLevel,"LV."+n.level),C.setString(this.view.labelBossName,n.name),C.setString(this.view.labelBossLife,"Life × "+n.maxHealth/1e4),B(this.view.nodeBossMsg).call((function(){o.view.nodeBossMsg.scale=d.ZERO,o.view.nodeBossMsg.active=!0})).to(.2,{scale:new d(1.2,1.2,1.2)}).to(.07,{scale:d.ONE}).start(),this.recoverBulletShoot();case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return j.apply(this,arguments)})},{key:"onBossHittenResp",value:function(e,t){this.updateBossMsgProgress(t)}},{key:"onMonsterHittenResp",value:(h=a(r().mark((function e(t,n,o,i){var s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return this.monsterList--,e.next=4,H.getInstance().getAnimation(O.BugBomb);case 4:(s=e.sent)&&v(s)&&(s.parent=this.view.nodeMonsterZone,s.setPosition(o),s.getComponent(w).play(),i.getComponent(_)&&i.getComponent(_).data.carryProp&&this.createBuff(i.getComponent(_).data.carryProp,i.position));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,n,o){return h.apply(this,arguments)})},{key:"updateBossMsgProgress",value:function(e){var t=E.instance.bossHealthBarAtlas,n=M.BossHealthBarLengthInHealth;e<=n&&(this.view.spriteBehindBossHp.node.active=!1);var o=t.getSpriteFrames(),i=Math.ceil(e/M.BossHealthBarLengthInHealth);C.setString(this.view.labelBossLife,"Life ×"+i);var s=i%o.length,a=s<=0?6:s-1;C.setSpriteFrame(this.view.spriteFrontBossHp,o[s]),C.setSpriteFrame(this.view.spriteBehindBossHp,o[a]),this.view.progressBossHp.progress=e%n/n}},{key:"checkPlaneMoveSpec",value:function(e,t,n){return!(e.x<=-M.BattleViewSize.width/2+50&&t<0)&&(!(e.x>=M.BattleViewSize.width/2-50&&t>0)&&(!(e.y<=-M.BattleViewSize.height/2+50&&n<0)&&!(e.y>=M.BattleViewSize.height/2-50&&n>0)))}},{key:"createBullet",value:function(e,t,n){var o=t==D.HERO?M.bulletType[e][n]:M.enemyBulletType[e],s=t==D.HERO?this.heroBulletsPool.get(this.getHeroBulletPoolName(e,n)):this.enemyBulletPools.get(e),a=new p("nodeBullet"),r=a.addComponent(g);r.offset=new u(o.collider.offset[0],o.collider.offset[1]),r.size.width=o.collider.size[0],r.size.height=o.collider.size[1],r.group=o.collider.group;var l=a.addComponent(S);l.bulletOwnerType=t,l.isContacting=!1,l.bulletName=e,l.bulletData=o,l.dataIndex=n,l.fromPool=s,D.HERO;var h,c=i(o.bullets);try{for(c.s();!(h=c.n()).done;){var d=h.value,v=new p("bulletSprite").addComponent(f);C.setSpriteFrameFromBundle(v,o.bundle,d.path),v.node.setPosition(d.position),v.node.scale=d.scale,v.node.angle=d.rotation,a.addChild(v.node)}}catch(e){c.e(e)}finally{c.f()}var y=a.addComponent(m);return y.anchorX=.5,y.anchorY=.5,y.width=o.collider.size[0],y.height=o.collider.size[1],a}},{key:"getBullet",value:function(e,t,n){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if((o=e.size()>0?e.get():this.createBullet(n,t,i))&&v(o))return t==D.HERO&&this.heroMainBulletArr.push(o),o.active=!0,o.getComponent(S).isContacting=!1,o.getComponent(S).bulletOwnerType=t,y.stopAllByTarget(o),o}},{key:"putBullet",value:function(e,t){t.getComponent(S).bulletOwnerType==D.HERO&&this.heroMainBulletArr.splice(this.heroMainBulletArr.indexOf(t),1),y.stopAllByTarget(t),t.removeFromParent(),e.put(t)}},{key:"createBoss",value:function(e){E.instance.createPrefab(this.view.nodeMonsterZone,F.M_C_BOSS,e)}},{key:"onEnemyAttack",value:function(e,t,n){if(this.bulletFactory){var o=this.bulletFactory[n.function];o&&o(n.bulletName,D.MONSTER,t.position,this.view.nodeBulletZone)}}},{key:"pauseBulletShoot",value:function(){this.isBulletPause=!0}},{key:"recoverBulletShoot",value:function(){this.isBulletPause=!1}},{key:"startCreating",value:function(e){var t=this;if(!this.copyMissionData)return console.error("no missionData in startCreating!");if(!this.copyMissionData.monster)return console.error("no monster in missionData!");if(this.creatingTime+=e,this.copyMissionData.monster.length>0&&this.creatingTime>=this.copyMissionData.monster[0].time){var n=this.copyMissionData.monster.splice(0,1)[0];return E.instance.createPrefab(this.view.nodeMonsterZone,n.resource,{monsterData:n,planeSolution_callback:function(){t.monsterList--}}),void this.monsterList++}this.copyMissionData.monster.length<=0&&this.monsterList<=0&&null!=this.copyMissionData.boss&&(z.instance.playOneShot(V.boss_come),this.createBoss(this.copyMissionData.boss),this.copyMissionData.boss=null)}},{key:"onclickRetry",value:function(){b.dispatchEvent(T.Main.restart)}},{key:"onclickDownload",value:function(){G.download()}},{key:"createBuff",value:(l=a(r().mark((function e(t,n){var o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.getInstance().getAnimation(O[t]);case 2:(o=e.sent).getComponent(Z).init(t,n),o.parent=this.view.nodePropZone;case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"changeFrameAngle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;this.frameAngle<=e?this.frameAngleSpeed=1:this.frameAngle>=t&&(this.frameAngleSpeed=-1),this.frameAngle+=.5*this.frameAngleSpeed,this.oppositeFrameAngle<=e?this.oppositeFrameAngleSpeed=1:this.oppositeFrameAngle>=t&&(this.oppositeFrameAngleSpeed=-1),this.oppositeFrameAngle=.5*this.oppositeFrameAngleSpeed}},{key:"update",value:function(e){var t=this;if(this.view.battleMapMove(),!this.isPause&&(this.runningTime+=e,this.isCountDownFinish))if(this.view.nodeStartMap.active&&this.view.nodeStartMap.setPosition(new d(0,this.view.nodeStartMap.position.y-M.startMapMoveSpeed)),this.view.nodeStartMap.active)this.view.planeCharge.active=!0,M.startMapMoveSpeed+=1,this.view.nodeStartMap.position.y<=-1e4&&(this.view.nodeStartMap.active=!1,this.view.scheduleOnce((function(){t.view.planeCharge.active=!1,B(t.view.nodeBattleSkill).to(.25,{position:new d(0,-350)}).call((function(){t.recoverBulletShoot()})).start()}),.5));else{if(this.startCreating(e),this.isBulletPause)return;this.changeFrameAngle();for(var n=M.bulletType[this.currentPlaneType],o=this.bulletTimeMap[this.currentPlaneType],i=0;i<n.length;i++)if(o[i]+=e,o[i]>n[i].cd){o[i]=0;var s=this.heroBulletsPool.get(this.getHeroBulletPoolName(this.currentPlaneType,i)),a=this.getBullet(s,D.HERO,this.currentPlaneType,i);if(v(a)){var r;a.parent=this.view.nodeBulletZone,a.setPosition(this.view.plane.position.x,this.view.plane.position.y+100);var l=(null===(r=a.getComponent(S).bulletData.bulletSolution[0].params)||void 0===r?void 0:r.moveAngle)||0,h=90;l<0?h=90-this.frameAngle:l>0&&(h=90+this.frameAngle),n[i].bulletSolution[0].solution(a,{moveAngle:h},n[i].speed)}}}}}]),e}())||j);l._RF.pop()}}}));

System.register("chunks:///_virtual/BattleModule.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleType.ts","./UIManager.ts","./LoadManager.ts","./PrefabConfig.ts","./Tools.ts"],(function(t){var e,o,l,a,n,i,s,u,r,_,p,c,d,h,B,m,y,w,b,S,f,g,v,k;return{setters:[function(t){e=t.defineProperty,o=t.createClass,l=t.classCallCheck,a=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){i=t.cclegacy,s=t._decorator,u=t.NodePool,r=t.Vec3,_=t.tween,p=t.Label,c=t.UIOpacity,d=t.instantiate,h=t.Font},function(t){B=t.HeroTypeEnum,m=t.BulletNameType_Enemy,y=t.HeroType,w=t.PropsType},function(t){b=t.UIManager},function(t){S=t.BundleNames,f=t.LoadManager},function(t){g=t.PrefabConfig,v=t.AssetsConfig},function(t){k=t.Tools}],execute:function(){var z,C,x,M;i._RF.push({},"ac316j8Hi5Nk5i3dNKH19fj","BattleModule",void 0);var H=s.ccclass;s.property,t("BattleModule",H("BattleModule")((e(C=function(){function t(){l(this,t)}var e;return o(t,null,[{key:"createLabelHitHealth",value:(e=a(n().mark((function e(o,l,a,i){var s,u,B;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=t.hitLabelPool.size()>0?t.hitLabelPool.get():d(b.instance.hitHealthPrefab)).scale=r.ONE,s.getComponent(c).opacity=255,u=o.isCrit?v.battleHitCritFont:v.battleHitFont,e.next=6,f.instance.loadAssetFromBundle(u.bundle,u.path,h);case 6:B=e.sent,s.getComponent(p).font=B,s.getComponent(p).fontSize=u.fontSize,s.getComponent(p).lineHeight=u.fontSize,s.parent=i,s.setPosition(new r(a.x+25,a.y+25)),s.getComponent(p).string=l+"",_(s).by(.3,{position:new r(0,50)},{onUpdate:function(e,o){o>.5&&(s.getComponent(c).opacity=255*(1.5-o)),1==o&&t.hitLabelPool.put(s)}}).start();case 14:case"end":return e.stop()}}),e)}))),function(t,o,l,a){return e.apply(this,arguments)})},{key:"checkCrit",value:function(t,e,o){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2;return t>(o-e)*(1-l)+e}},{key:"planeSolution_01",value:function(e,o){var l=new r(-1*t.BattleViewSize.width*.5-100,t.BattleViewSize.height*(3/4)),a=new r(.5*t.BattleViewSize.width+100,-1*t.BattleViewSize.height*(1/4)),n=new r(-1*t.BattleViewSize.width*.5,0);k.bezierTo(e,5,l,n,a,null,o).start()}},{key:"planeSolution_02",value:function(e,o){var l=new r(.5*t.BattleViewSize.width+100,t.BattleViewSize.height*(3/4)),a=new r(-1*t.BattleViewSize.width*.5-100,-1*t.BattleViewSize.height*(1/4)),n=new r(.5*t.BattleViewSize.width,0);k.bezierTo(e,5,l,n,a,null,o).start()}},{key:"planeSolution_03",value:function(e,o){var l=new r(-1*t.BattleViewSize.width*.5-100,t.BattleViewSize.height*(3/4)),a=new r(-200,l.y),n=new r(a.x,-1e3);_(e).set({position:l}).to(2,{position:a}).delay(2).to(4,{position:n}).call((function(){o&&o()})).start()}},{key:"planeSolution_04",value:function(e,o){var l=new r(.5*t.BattleViewSize.width+100,t.BattleViewSize.height*(3/4)),a=new r(200,l.y),n=new r(a.x,-1e3);_(e).set({position:l}).to(2,{position:a}).delay(2).to(4,{position:n}).call((function(){o&&o()})).start()}},{key:"planeSolution_05",value:function(e,o){var l=new r(-1*t.BattleViewSize.width*.5-100,t.BattleViewSize.height*(1/4)),a=new r(-200,l.y);_(e).set({position:l}).to(1,{position:a}).start()}},{key:"planeSolution_06",value:function(e,o){var l=new r(.5*t.BattleViewSize.width+100,t.BattleViewSize.height*(1/4)),a=new r(200,l.y);_(e).set({position:l}).to(1,{position:a}).start()}},{key:"planeSolution_07",value:function(e,o){var l=new r(0,.5*t.BattleViewSize.height+100),a=new r(0,.25*t.BattleViewSize.height);_(e).set({position:l}).to(1,{position:a}).start()}},{key:"planeSolution_08",value:function(e,o){var l=new r(-1*t.BattleViewSize.width*.5-100,0),a=new r(0,0),n=new r(t.BattleViewSize.width/5,t.BattleViewSize.height/4),i=new r(.5*t.BattleViewSize.width+100,t.BattleViewSize.height/4);k.cubicBezierTo(e,5,l,a,n,i,o)}},{key:"planeSolution_09",value:function(e,o){var l=new r(.5*t.BattleViewSize.width+100,0),a=new r(0,0),n=new r(-t.BattleViewSize.width/5,t.BattleViewSize.height/4),i=new r(-1*t.BattleViewSize.width*.5-100,t.BattleViewSize.height/4);k.cubicBezierTo(e,5,l,a,n,i,o)}},{key:"planeSolution_10",value:function(e,o){var l=new r(-.3*t.BattleViewSize.width,.5*t.BattleViewSize.height+100),a=new r(l.x,-.5*t.BattleViewSize.height-100);_(e).set({position:l}).to(4,{position:a}).call((function(){o&&o()})).start()}},{key:"planeSolution_11",value:function(e,o){var l=new r(.3*t.BattleViewSize.width,.5*t.BattleViewSize.height+100),a=new r(l.x,-.5*t.BattleViewSize.height-100);_(e).set({position:l}).to(4,{position:a}).call((function(){o&&o()})).start()}},{key:"planeSolution_12",value:function(e,o){var l=new r(-.5*t.BattleViewSize.width-100,.3*t.BattleViewSize.height),a=new r(.5*t.BattleViewSize.width+100,l.y);_(e).set({position:l}).to(4,{position:a}).call((function(){o&&o()})).start()}},{key:"planeSolution_13",value:function(e,o){var l=new r(.5*t.BattleViewSize.width+100,.3*t.BattleViewSize.height),a=new r(-.5*t.BattleViewSize.width-100,l.y);_(e).set({position:l}).to(4,{position:a}).call((function(){o&&o()})).start()}},{key:"planeSolution_14",value:function(e,o){var l=new r(-.5*t.BattleViewSize.width-100,-.3*t.BattleViewSize.height),a=new r(.5*t.BattleViewSize.width+100,l.y);_(e).set({position:l}).to(4,{position:a}).call((function(){o&&o()})).start()}},{key:"planeSolution_15",value:function(e,o){var l=new r(.5*t.BattleViewSize.width+100,-.3*t.BattleViewSize.height),a=new r(-.5*t.BattleViewSize.width-100,l.y);_(e).set({position:l}).to(4,{position:a}).call((function(){o&&o()})).start()}},{key:"bulletSolution_00",value:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;e||(e={});var l=e.callback||null;_(t).by(10,{position:new r(0,60*o*10)}).call((function(){l&&l()})).start()}},{key:"bulletSolution_01",value:function(e,o){o||(o={});var l=o.speed||-50,a=o.callback||null,n=_(e).by(10,{position:new r(0,60*l)},{onUpdate:function(e,o){e.position.y<t.screenBottomSpec&&(a&&a(),n.stop())}}).repeatForever().start()}},{key:"bulletSolution_02",value:function(t,e){e||(e={});var o=e.speed||-80,l=e.callback||null,a=e.moveAngle||90,n=e.judgement||null;a=a*Math.PI/180;var i=_(t).by(10,{position:new r(60*o*Math.cos(a),60*o*Math.sin(a))},{onUpdate:function(t,e){var o=e>=1;n&&(0!=n.x&&0!=n.y&&console.error("x和y的判断条件只允许一项不为0,  否则以Y为准"),0!=n.x&&(o=n.x<0?t.position.x<n.x:t.position.x>n.x),0!=n.y&&(o=n.y<0?t.position.y<n.y:t.position.y>n.y)),o&&(l&&l(),i.stop())}}).repeatForever().start()}},{key:"bulletSolution_03",value:function(t,e){}},{key:"bulletSolution_04",value:function(t,e){e||(e={});var o=e.speed||-50,l=e.callback||null,a=e.judgement||null,n=_(t).by(10,{position:new r(0,6*o*10),angle:1200},{onUpdate:function(t,e){t.position.y<a.y&&(l&&l(),n.stop())}}).repeatForever().start()}},{key:"bulletSolution_05",value:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;e||(e={});var l=o||50,a=e.callback||null,n=e.moveAngle*Math.PI/180;t.getChildByName("bulletSprite").angle=e.moveAngle-90;_(t).by(10,{position:new r(60*l*10*Math.cos(n),60*l*10*Math.sin(n))}).call((function(){a&&a()})).start()}}]),t}(),"BattleViewSize",{width:640,height:1336}),e(C,"startWaitTime",1),e(C,"startMapMoveSpeed",1),e(C,"battleMapMoveSpeed",50),e(C,"screenBottomSpec",-.5*C.BattleViewSize.height-300),e(C,"hitLabelPool",new u("hitHealth")),e(C,"BossHealthBarLengthInHealth",1e4),e(C,"skillBombCD",1),e(C,"bulletType",(e(x={},B.heroType1,[{bundle:S.BundleBattle,speed:40,cd:.2,atk:[500,1e3],collider:{offset:[0,40],size:[50,100],group:2},bulletSolution:[{solution:C.bulletSolution_00}],bullets:[{path:"Texture/Bullets/Z_04_zidan_1b/spriteFrame",position:new r(-5,42),scale:new r(.7,.7,.7),rotation:0},{path:"Texture/Bullets/Z_04_zidan_1b/spriteFrame",position:new r(5,42),scale:new r(.7,.7,.7),rotation:0}]},{bundle:S.BundleBattle,speed:40,cd:.3,atk:[500,1e3],collider:{offset:[45,30],size:[20,100],group:2},bulletSolution:[{solution:C.bulletSolution_00}],bullets:[{path:"Texture/Bullets/Z_04_zidan_1a/spriteFrame",position:new r(45,0),scale:new r(.7,.7,.7),rotation:0}]},{bundle:S.BundleBattle,speed:40,cd:.3,atk:[500,1e3],collider:{offset:[-45,30],size:[20,100],group:2},bulletSolution:[{solution:C.bulletSolution_00}],bullets:[{path:"Texture/Bullets/Z_04_zidan_1a/spriteFrame",position:new r(-45,0),scale:new r(.7,.7,.7),rotation:0}]}]),e(x,B.heroType2,[{bundle:S.BundleBattle,speed:50,cd:.15,atk:[500,1e3],collider:{offset:[0,40],size:[50,100],group:2},bulletSolution:[{solution:C.bulletSolution_00}],bullets:[{path:"Texture/Bullets/Z_04_zidan_1b/spriteFrame",position:new r(-5,42),scale:new r(.7,.7,.7),rotation:0},{path:"Texture/Bullets/Z_04_zidan_1b/spriteFrame",position:new r(-5,42),scale:new r(.7,.7,.7),rotation:0}]},{bundle:S.BundleBattle,speed:40,cd:.15,atk:[500,1e3],collider:{offset:[45,30],size:[20,100],group:2},bulletSolution:[{solution:C.bulletSolution_00}],bullets:[{path:"Texture/Bullets/Z_04_zidan_1a/spriteFrame",position:new r(45,0),scale:new r(.7,.7,.7),rotation:0}]},{bundle:S.BundleBattle,speed:40,cd:.15,atk:[500,1e3],collider:{offset:[-45,30],size:[20,100],group:2},bulletSolution:[{solution:C.bulletSolution_00}],bullets:[{path:"Texture/Bullets/Z_04_zidan_1a/spriteFrame",position:new r(-45,0),scale:new r(.7,.7,.7),rotation:0}]},{bundle:S.BundleBattle,speed:40,cd:.15,atk:[500,1e3],collider:{offset:[0,30],size:[130,100],group:2},bulletSolution:[{solution:C.bulletSolution_00}],bullets:[{path:"Texture/Bullets/Z_04_zidan_4/spriteFrame",position:new r(0,57),scale:new r(.5,.5,.5),rotation:0},{path:"Texture/Bullets/Z_04_zidan_4/spriteFrame",position:new r(-34,4),scale:new r(.3,.3,.3),rotation:0},{path:"Texture/Bullets/Z_04_zidan_4/spriteFrame",position:new r(34,4),scale:new r(.3,.3,.3),rotation:0}]}]),e(x,B.heroType3,[{bundle:S.BundleBattle,speed:30,cd:.05,atk:[150,400],collider:{offset:[0,40],size:[50,100],group:2},bulletSolution:[{solution:C.bulletSolution_00}],bullets:[{path:"Texture/Bullets/Z_04_zidan_1b/spriteFrame",position:new r(-5,42),scale:new r(.7,.7,.7),rotation:0},{path:"Texture/Bullets/Z_04_zidan_1b/spriteFrame",position:new r(-5,42),scale:new r(.7,.7,.7),rotation:0}]},{bundle:S.BundleBattle,speed:30,cd:.05,atk:[150,400],collider:{offset:[45,30],size:[20,100],group:2},bulletSolution:[{solution:C.bulletSolution_00}],bullets:[{path:"Texture/Bullets/Z_04_zidan_1a/spriteFrame",position:new r(45,0),scale:new r(.7,.7,.7),rotation:0}]},{bundle:S.BundleBattle,speed:30,cd:.05,atk:[150,400],collider:{offset:[-45,30],size:[20,100],group:2},bulletSolution:[{solution:C.bulletSolution_00}],bullets:[{path:"Texture/Bullets/Z_04_zidan_1a/spriteFrame",position:new r(-45,0),scale:new r(.7,.7,.7),rotation:0}]},{bundle:S.BundleBattle,speed:30,cd:.05,atk:[150,400],collider:{offset:[0,30],size:[130,100],group:2},bulletSolution:[{solution:C.bulletSolution_00}],bullets:[{path:"Texture/Bullets/Z_04_zidan_4/spriteFrame",position:new r(0,57),scale:new r(.5,.5,.5),rotation:0},{path:"Texture/Bullets/Z_04_zidan_4/spriteFrame",position:new r(-34,4),scale:new r(.3,.3,.3),rotation:0},{path:"Texture/Bullets/Z_04_zidan_4/spriteFrame",position:new r(34,4),scale:new r(.3,.3,.3),rotation:0}]},{bundle:S.BundleBattle,speed:30,cd:.05,atk:[150,400],collider:{offset:[0,30],size:[130,100],group:2},bulletSolution:[{solution:C.bulletSolution_00}],bullets:[{path:"Texture/Bullets/Z_04_zidan_4/spriteFrame",position:new r(0,57),scale:new r(.5,.5,.5),rotation:0},{path:"Texture/Bullets/Z_04_zidan_4/spriteFrame",position:new r(-34,4),scale:new r(.3,.3,.3),rotation:0},{path:"Texture/Bullets/Z_04_zidan_4/spriteFrame",position:new r(34,4),scale:new r(.3,.3,.3),rotation:0}]},{bundle:S.BundleBattle,speed:30,cd:.05,atk:[150,400],collider:{offset:[-65,5],size:[50,130],group:2},bulletSolution:[{solution:C.bulletSolution_00}],bullets:[{path:"Texture/Bullets/Z_04_zidan_4b/spriteFrame",position:new r(-65,0),scale:new r(.7,.7,.7),rotation:0}]},{bundle:S.BundleBattle,speed:30,cd:.05,atk:[150,400],collider:{offset:[65,5],size:[50,130],group:2},bulletSolution:[{solution:C.bulletSolution_00}],bullets:[{path:"Texture/Bullets/Z_04_zidan_4b/spriteFrame",position:new r(65,0),scale:new r(.7,.7,.7),rotation:0}]},{bundle:S.BundleBattle,speed:30,cd:.05,atk:[150,400],collider:{offset:[-65,50],size:[40,200],group:2},bulletSolution:[{solution:C.bulletSolution_05,params:{moveAngle:-1}}],bullets:[{path:"Texture/Bullets/ziseji02_SPWP/spriteFrame",position:new r(-65,50),scale:r.ONE,rotation:0}]},{bundle:S.BundleBattle,speed:30,cd:.05,atk:[150,400],collider:{offset:[65,50],size:[40,200],group:2},bulletSolution:[{solution:C.bulletSolution_05,params:{moveAngle:1}}],bullets:[{path:"Texture/Bullets/ziseji02_SPWP/spriteFrame",position:new r(65,50),scale:r.ONE,rotation:0}]}]),x)),e(C,"enemyBulletType",(e(M={},m.fullboss_3,{bundle:S.BundleBattle,speed:-30,atk:[800,1e3],collider:{offset:[0,0],size:[60,60],group:2},bulletSolution:[{solution:C.bulletSolution_02,params:{judgement:new r(0,-.25*C.BattleViewSize.height)}},{solution:C.bulletSolution_02,params:{moveAngle:30}}],bullets:[{path:"Texture/Bullets/fullboss_3/spriteFrame",position:new r(0,0),scale:r.ONE,rotation:0}]}),e(M,m.Z_00_zidan_3b,{bundle:S.BundleBattle,speed:-50,atk:[800,1e3],collider:{offset:[0,0],size:[90,90],group:2},bulletSolution:[{solution:C.bulletSolution_04,params:{judgement:new r(0,C.screenBottomSpec)}}],bullets:[{path:"Texture/Bullets/Z_00_zidan_3b/spriteFrame",position:new r(0,0),scale:r.ONE,rotation:0}]}),e(M,m.z_06,{bundle:S.BundleBattle,speed:-50,atk:[800,1e3],collider:{offset:[0,0],size:[36,40],group:2},bulletSolution:[{solution:C.bulletSolution_02,params:{moveAngle:20}}],bullets:[{path:"Texture/Bullets/z_06/spriteFrame",position:new r(0,0),scale:r.ONE,rotation:180}]}),M)),e(C,"heroType",e({},y.DEFAULT,{maxHealth:15e3})),e(C,"missionType",{mission2:{enemyBullets:[m.fullboss_3,m.Z_00_zidan_3b,m.z_06],boss:{resource:g.M_C_BOSS,name:"parasitized commander",level:50,maxHealth:5e5,dragonBone:{show:["start"],standBy:["start"],attack:[{animation:"attack1",cd:2},{animation:"attack2",cd:3}]},position:new r(0,200),solution:{bullet:[{function:"solution_02",bulletName:m.fullboss_3},{function:"solution_03",bulletName:m.z_06}]}},monster:[{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:1,solution:{fly:[C.planeSolution_01],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:1.5,solution:{fly:[C.planeSolution_01],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:2,solution:{fly:[C.planeSolution_01],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:2.5,solution:{fly:[C.planeSolution_01],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:3,solution:{fly:[C.planeSolution_01],bullet:[]},carryProp:w.WeaponUp},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:3,solution:{fly:[C.planeSolution_02],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:3.5,solution:{fly:[C.planeSolution_02],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:4,solution:{fly:[C.planeSolution_02],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:4.5,solution:{fly:[C.planeSolution_02],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:5,solution:{fly:[C.planeSolution_02],bullet:[]},carryProp:w.WeaponUp},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:3.5,solution:{fly:[C.planeSolution_12],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:4,solution:{fly:[C.planeSolution_12],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:4.5,solution:{fly:[C.planeSolution_12],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:5,solution:{fly:[C.planeSolution_12],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:5.5,solution:{fly:[C.planeSolution_12],bullet:[]},carryProp:w.WeaponUp},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:1.5,solution:{fly:[C.planeSolution_13],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:2,solution:{fly:[C.planeSolution_13],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:2.5,solution:{fly:[C.planeSolution_13],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:3,solution:{fly:[C.planeSolution_13],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:3.5,solution:{fly:[C.planeSolution_13],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:6,solution:{fly:[C.planeSolution_08],bullet:[]},carryProp:w.HpUp},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:6.5,solution:{fly:[C.planeSolution_08],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:7,solution:{fly:[C.planeSolution_08],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:7.5,solution:{fly:[C.planeSolution_08],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:8,solution:{fly:[C.planeSolution_08],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:7,solution:{fly:[C.planeSolution_09],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:7.5,solution:{fly:[C.planeSolution_09],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:8,solution:{fly:[C.planeSolution_09],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:8.5,solution:{fly:[C.planeSolution_09],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:9,solution:{fly:[C.planeSolution_09],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:7.5,solution:{fly:[C.planeSolution_14],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:8,solution:{fly:[C.planeSolution_14],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:8.5,solution:{fly:[C.planeSolution_14],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:9,solution:{fly:[C.planeSolution_14],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:9.5,solution:{fly:[C.planeSolution_14],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:7.5,solution:{fly:[C.planeSolution_15],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:8,solution:{fly:[C.planeSolution_15],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:8.5,solution:{fly:[C.planeSolution_15],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:9,solution:{fly:[C.planeSolution_15],bullet:[]}},{resource:g.M_C_C1,name:"",level:5,autoDestroy:!0,maxHealth:1e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:9.5,solution:{fly:[C.planeSolution_15],bullet:[]}},{resource:g.M_C_XZF,name:"",level:5,autoDestroy:!0,maxHealth:3e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:8,solution:{fly:[C.planeSolution_10],bullet:[]}},{resource:g.M_C_XZF,name:"",level:5,autoDestroy:!0,maxHealth:3e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:9,solution:{fly:[C.planeSolution_10],bullet:[]}},{resource:g.M_C_XZF,name:"",level:5,autoDestroy:!0,maxHealth:3e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:10,solution:{fly:[C.planeSolution_10],bullet:[]},carryProp:w.WeaponUp},{resource:g.M_C_XZF,name:"",level:5,autoDestroy:!0,maxHealth:3e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:11,solution:{fly:[C.planeSolution_10],bullet:[]}},{resource:g.M_C_XZF,name:"",level:5,autoDestroy:!0,maxHealth:3e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:12,solution:{fly:[C.planeSolution_10],bullet:[]}},{resource:g.M_C_XZF,name:"",level:5,autoDestroy:!0,maxHealth:3e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:8.5,solution:{fly:[C.planeSolution_11],bullet:[]}},{resource:g.M_C_XZF,name:"",level:5,autoDestroy:!0,maxHealth:3e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:9.5,solution:{fly:[C.planeSolution_11],bullet:[]}},{resource:g.M_C_XZF,name:"",level:5,autoDestroy:!0,maxHealth:3e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:10.5,solution:{fly:[C.planeSolution_11],bullet:[]},carryProp:w.HpUp},{resource:g.M_C_XZF,name:"",level:5,autoDestroy:!0,maxHealth:3e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:11.5,solution:{fly:[C.planeSolution_11],bullet:[]}},{resource:g.M_C_XZF,name:"",level:5,autoDestroy:!0,maxHealth:3e3,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[]},time:12.5,solution:{fly:[C.planeSolution_11],bullet:[]}},{resource:g.M_C_XZF,name:"",level:5,autoDestroy:!1,maxHealth:2e4,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[{animation:"attack_1",cd:2}]},time:8,solution:{fly:[C.planeSolution_05],bullet:[{function:"solution_04",bulletName:m.Z_00_zidan_3b}]}},{resource:g.M_C_XZF,name:"",level:5,autoDestroy:!1,maxHealth:2e4,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[{animation:"attack_1",cd:2}]},time:8,solution:{fly:[C.planeSolution_06],bullet:[{function:"solution_04",bulletName:m.Z_00_zidan_3b}]},carryProp:w.HpUp},{resource:g.M_C_XZF,name:"",level:5,autoDestroy:!1,maxHealth:2e4,dragonBone:{show:["start_1"],standBy:["start_1"],attack:[{animation:"attack_1",cd:2}]},time:8,solution:{fly:[C.planeSolution_07],bullet:[{function:"solution_04",bulletName:m.Z_00_zidan_3b}]}}],props:{}}}),e(C,"skillType",{bbomb:{atk:5e3}}),z=C))||z);i._RF.pop()}}}));

System.register("chunks:///_virtual/BattleProps.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Main.ts","./TweenManager.ts","./BattleModule.ts"],(function(e){var t,i,s,n,o,a,h,d,p,r,c,u,l,g,v;return{setters:[function(e){t=e.inherits,i=e.createSuper,s=e.classCallCheck,n=e.defineProperty,o=e.assertThisInitialized,a=e.createClass},function(e){h=e.cclegacy,d=e._decorator,p=e.UITransform,r=e.Vec3,c=e.isValid,u=e.Component},function(e){l=e.Main},function(e){g=e.TweenManager},function(e){v=e.BattleModule}],execute:function(){var m;h._RF.push({},"b87252SXrJNW5eIDMBIv5iK","BattleProps",void 0);var M=d.ccclass;d.property,e("BattleProps",M("BattleProps")(m=function(e){t(d,e);var h=i(d);function d(){var e;s(this,d);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e=h.call.apply(h,[this].concat(i)),n(o(e),"type",void 0),n(o(e),"moveSpecX",[]),n(o(e),"moveSpecY",[]),n(o(e),"moveAngle",360*Math.random()*Math.PI/180),n(o(e),"speedBase",3*Math.random()+2),n(o(e),"speed",void 0),n(o(e),"isInited",!1),n(o(e),"logicRunning",!0),n(o(e),"pauseChangeState",0),e}return a(d,[{key:"init",value:function(e,t){this.type=e,this.setOriginPos(t),this.isInited=!0}},{key:"setOriginPos",value:function(e){var t=this.node.getComponent(p),i=v.BattleViewSize;this.node.setPosition(e),this.moveSpecX=[-i.width/2+t.width/2,i.width/2-t.width/2],this.moveSpecY=[-i.height/2+t.height/2,i.height/2-t.height/2],this.speed=new r(this.speedBase*Math.cos(this.moveAngle),this.speedBase*Math.sin(this.moveAngle))}},{key:"randomMove",value:function(e){c(this.node)&&(this.node.position.x>=this.moveSpecX[1]?this.speed=new r(-Math.abs(this.speed.x),this.speed.y):this.node.position.x<=this.moveSpecX[0]&&(this.speed=new r(Math.abs(this.speed.x),this.speed.y)),this.node.position.y>=this.moveSpecY[1]?this.speed=new r(this.speed.x,-Math.abs(this.speed.y)):this.node.position.y<=this.moveSpecY[0]&&(this.speed=new r(this.speed.x,Math.abs(this.speed.y))),this.node.setPosition(this.node.position.add(this.speed)))}},{key:"update",value:function(e){if(this.isInited)return l.getInstance().isLogicRunning||0!=this.pauseChangeState?l.getInstance().isLogicRunning&&1==this.pauseChangeState?(this.pauseChangeState=0,g.resumeAllNodeTween(this.node),void(this.logicRunning=!0)):void(this.logicRunning&&this.randomMove(e)):(this.pauseChangeState=1,g.pauseAllNodeTween(this.node),void(this.logicRunning=!1))}}]),d}(u))||m);h._RF.pop()}}}));

System.register("chunks:///_virtual/BattleType.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"b52bdgNsIlK67mHBj6TIhia","BattleType",void 0);e("ActorType",function(e){return e.BOSS="BOSS",e.MONSTER="MONSTER",e.HERO="HERO",e}({})),e("BulletOwnerType",function(e){return e.MONSTER="MONSTER",e.HERO="HERO",e}({})),e("BulletNameType_Enemy",function(e){return e.fullboss_3="fullboss_3",e.Z_00_zidan_3b="Z_00_zidan_3b",e.z_06="z_06",e}({})),e("PropsType",function(e){return e.WeaponUp="WeaponUp",e.HpUp="HpUp",e}({})),e("BossType",function(e){return e.M_C_BOSS="M_C_BOSS",e}({})),e("MonsterType",function(e){return e.M_C_XZF="M_C_XZF",e.M_C_C1="M_C_C1",e}({})),e("HeroType",function(e){return e.DEFAULT="DEFAULT",e}({})),e("HeroTypeEnum",function(e){return e[e.heroType1=0]="heroType1",e[e.heroType2=1]="heroType2",e[e.heroType3=2]="heroType3",e[e.heroType4=3]="heroType4",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleController.ts","./BattleModule.ts","./Tools.ts","./UIManager.ts","./AudioManager.ts","./PlayableHtml.ts"],(function(e){var t,o,n,i,s,a,d,h,l,r,p,u,B,g,c,v,y,P,C,H,m,f,w,b;return{setters:[function(e){t=e.inherits,o=e.createSuper,n=e.classCallCheck,i=e.defineProperty,s=e.assertThisInitialized,a=e.createClass},function(e){d=e.cclegacy,h=e._decorator,l=e.UITransform,r=e.Label,p=e.ProgressBar,u=e.Sprite,B=e.tween,g=e.Vec3,c=e.instantiate,v=e.UIOpacity,y=e.Component},function(e){P=e.BattleController},function(e){C=e.BattleModule},function(e){H=e.Tools},function(e){m=e.UIManager},function(e){f=e.AudioManager,w=e.AudioNames},function(e){b=e.default}],execute:function(){var M;d._RF.push({},"208bdCYfqRMc7EF9NpYd1Ly","BattleView",void 0);var S=h.ccclass;h.property,e("BattleView",S("BattleView")(M=function(e){t(h,e);var d=o(h);function h(){var e;n(this,h);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return e=d.call.apply(d,[this].concat(o)),i(s(e),"control",void 0),i(s(e),"top",void 0),i(s(e),"left",void 0),i(s(e),"touchZone",void 0),i(s(e),"plane",void 0),i(s(e),"planeCharge",void 0),i(s(e),"nodeStartMap",void 0),i(s(e),"nodeBattleBg",void 0),i(s(e),"nodeCountDown",void 0),i(s(e),"nodeBulletZone",void 0),i(s(e),"nodeMonsterZone",void 0),i(s(e),"nodePropZone",void 0),i(s(e),"nodeBossMsg",void 0),i(s(e),"labelBossLevel",void 0),i(s(e),"labelBossName",void 0),i(s(e),"labelBossLife",void 0),i(s(e),"progressBossHp",void 0),i(s(e),"spriteFrontBossHp",void 0),i(s(e),"spriteBehindBossHp",void 0),i(s(e),"nodePauseBtn",void 0),i(s(e),"nodePauseScene",void 0),i(s(e),"nodeClosePause",void 0),i(s(e),"nodePauseLabel",void 0),i(s(e),"isPauseInited",!1),i(s(e),"nodeBattleSkill",void 0),i(s(e),"nodeEnemy",void 0),i(s(e),"progressHeroHp",void 0),i(s(e),"nodeHeroHit",void 0),i(s(e),"heroHitTime",1e4),i(s(e),"heroHitTimeSpec",3),i(s(e),"nodeEnemyBullet",void 0),i(s(e),"nodeGameOver",void 0),i(s(e),"nodeRetryBtn",void 0),i(s(e),"nodeDownloadBtn",void 0),e}return a(h,[{key:"onLoad",value:function(){C.BattleViewSize={width:this.node.getComponent(l).width,height:this.node.getComponent(l).height},console.log("design size: battleView, ",C.BattleViewSize),this.control=new P(this),this.initHitHealthPool(),this.top=this.node.getChildByPath("top"),this.left=this.node.getChildByPath("left"),this.touchZone=this.node.getChildByPath("touchZone"),this.plane=this.node.getChildByPath("NodeHero"),this.nodeStartMap=this.node.getChildByPath("nodeStartMap"),this.nodeBattleBg=this.node.getChildByPath("nodeBattleBg"),this.nodeCountDown=this.node.getChildByPath("nodeCountDown"),this.nodeBulletZone=this.node.getChildByPath("bulletZone"),this.nodeMonsterZone=this.node.getChildByPath("bossZone"),this.planeCharge=this.node.getChildByPath("NodeHero/charge"),this.nodePropZone=this.node.getChildByPath("propZone"),this.nodeBossMsg=this.node.getChildByPath("top/nodeBossMsg"),this.labelBossLevel=this.node.getChildByPath("top/nodeBossMsg/labelBossLevel").getComponent(r),this.labelBossName=this.node.getChildByPath("top/nodeBossMsg/labelBossName").getComponent(r),this.labelBossLife=this.node.getChildByPath("top/nodeBossMsg/labelBossLife").getComponent(r),this.progressBossHp=this.node.getChildByPath("top/nodeBossMsg/progressBossHp").getComponent(p),this.spriteFrontBossHp=this.node.getChildByPath("top/nodeBossMsg/progressBossHp/front").getComponent(u),this.spriteBehindBossHp=this.node.getChildByPath("top/nodeBossMsg/progressBossHp/behind").getComponent(u),this.nodeBossMsg.active=!1,this.nodePauseBtn=this.node.getChildByPath("top/heroHpZone/buttonPause"),this.nodePauseScene=this.node.getChildByPath("nodePause"),this.nodeClosePause=this.node.getChildByPath("nodePause/blockInputEvents"),this.nodePauseLabel=this.node.getChildByPath("nodePause/labelContinue"),this.nodeBattleSkill=this.node.getChildByPath("left/nodeBattleSkill"),this.progressHeroHp=this.node.getChildByPath("top/heroHpZone/progressHeroHp").getComponent(p),this.nodeHeroHit=this.node.getChildByPath("heroHit"),this.nodeEnemyBullet=this.node.getChildByPath("bulletZone/nodeEnemyBullet"),this.nodeGameOver=this.node.getChildByPath("nodeGameOver"),this.nodeGameOver.active=!1,this.nodeRetryBtn=this.node.getChildByPath("nodeGameOver/buttonRetry"),this.nodeDownloadBtn=this.node.getChildByPath("nodeGameOver/buttonDownload"),this.setHeroHpProgress(1),this.showHeroHit(!1),this.setPause(!1),B(this.nodeDownloadBtn).to(.3,{scale:new g(1.5,1.5,1.5)}).to(.3,{scale:g.ONE}).delay(.5).union().repeatForever().start(),b.set_google_play_url("https://play.google.com/store/apps/details?id=com.unity3d.auicreativetestapp"),b.set_app_store_url("https://apps.apple.com/us/app/ad-testing/id1463016906"),b.is_hide_download()&&(this.nodeDownloadBtn.active=!1,this.nodeRetryBtn.setPosition(0,this.nodeRetryBtn.position.y))}},{key:"start",value:function(){this.control.start(),f.instance.audioSource.playing||f.instance.playMusic(w.battle_bk1)}},{key:"onDestroy",value:function(){this.control.onDestroy()}},{key:"initHitHealthPool",value:function(){for(var e=0;e<10;e++){var t=c(m.instance.hitHealthPrefab);C.hitLabelPool.put(t)}}},{key:"showHeroHit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;this.nodeHeroHit.active=e,e&&(this.heroHitTime=0,this.heroHitTimeSpec=t)}},{key:"setHeroHpProgress",value:function(e){this.progressHeroHp.progress=e}},{key:"setPause",value:function(e){this.isPauseInited||(B(this.nodePauseLabel.getComponent(v)).to(.5,{opacity:0}).to(.5,{opacity:255}).union().repeatForever().start(),this.isPauseInited=!0),this.nodePauseScene.active=e}},{key:"updateCountDown",value:function(e,t){var o=this;this.nodeCountDown.active=e>0,this.nodeCountDown.active&&B(this.nodeCountDown).parallel(B(this.nodeCountDown).to(.15,{scale:new g(1,1,1)}).delay(.75).to(.15,{scale:g.ZERO}),B(this.nodeCountDown).call((function(){e--,H.setString(o.nodeCountDown.getComponent(r),Math.round(e)+""),e<=0&&t()}))).repeat(3).start()}},{key:"battleMapMove",value:function(){for(var e=0;e<this.nodeBattleBg.children.length;e++){var t=this.nodeBattleBg.children[e];t.setPosition(new g(0,t.position.y-C.battleMapMoveSpeed)),t.position.y<=-1400&&t.setPosition(new g(0,2800))}}},{key:"update",value:function(e){this.control.update(e),this.heroHitTime+=e,this.heroHitTime>=this.heroHitTimeSpec&&(this.heroHitTimeSpec=3,this.showHeroHit(!1))}}]),h}(y))||M);d._RF.pop()}}}));

System.register("chunks:///_virtual/BBomb.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationClipManager.ts"],(function(n){var t,e,o,i,r,a,c,s;return{setters:[function(n){t=n.inherits,e=n.createSuper,o=n.classCallCheck,i=n.createClass},function(n){r=n.cclegacy,a=n._decorator,c=n.Component},function(n){s=n.AnimationClipManager}],execute:function(){var u;r._RF.push({},"443f1LVUKdHkLKBjtZvGVna","BBomb",void 0);var l=a.ccclass;a.property,n("Bbomb",l("BBomb")(u=function(n){t(a,n);var r=e(a);function a(){return o(this,a),r.apply(this,arguments)}return i(a,[{key:"onAnimCompleted",value:function(){s.getInstance().putAnimation(this.node)}}]),a}(c))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/BugBomb.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationClipManager.ts"],(function(n){var t,e,o,i,r,a,c,u;return{setters:[function(n){t=n.inherits,e=n.createSuper,o=n.classCallCheck,i=n.createClass},function(n){r=n.cclegacy,a=n._decorator,c=n.Component},function(n){u=n.AnimationClipManager}],execute:function(){var s;r._RF.push({},"b77a4qT0G5O1K1QSCKKipMn","BugBomb",void 0);var l=a.ccclass;a.property,n("BugBomb",l("BugBomb")(s=function(n){t(a,n);var r=e(a);function a(){return o(this,a),r.apply(this,arguments)}return i(a,[{key:"onAnimCompleted",value:function(){u.getInstance().putAnimation(this.node)}}]),a}(c))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/BulletFactory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleType.ts","./BattleModule.ts"],(function(e){var t,l,o,n,u,r,a;return{setters:[function(e){t=e.defineProperty,l=e.createClass,o=e.classCallCheck},function(e){n=e.cclegacy,u=e._decorator},function(e){r=e.BulletOwnerType},function(e){a=e.BattleModule}],execute:function(){var i,c;n._RF.push({},"04b90VPB7tFNJYlAhA6vNtH","BulletFactory",void 0);var s=u.ccclass;u.property,e("BulletFactory",s("BulletFactory")((t(c=function(){function e(t){o(this,e),e.controller=t}return l(e,[{key:"solution_02",value:function(t,l,o,n){var u=a.enemyBulletType[t],i=e.controller.enemyBulletPools.get(t),c=e.controller.getBullet(i,r.MONSTER,t);if(c&&c.isValid){c.parent=n,c.setPosition(o);var s=u.bulletSolution;s[0].solution(c,{judgement:s[0].params.judgement,callback:function(){i.put(c);for(var l=1;l<=12;l++){var o=e.controller.getBullet(i,r.MONSTER,t);o.setPosition(c.position),o.parent=n,o.active=!0,s[1].solution(o,{moveAngle:s[1].params.moveAngle*l,callback:function(){i.put(c)}})}}})}}},{key:"solution_03",value:function(t,l,o,n){for(var u=function(){var l=a.enemyBulletType[t],u=e.controller.enemyBulletPools.get(t),c=e.controller.getBullet(u,r.MONSTER,t);if(c&&c.isValid){c.parent=n,c.setPosition(o);var s=l.bulletSolution;s[0].solution(c,{moveAngle:i*s[0].params.moveAngle+45,callback:function(){u.put(c)}})}},i=0;i<6;i++)u()}},{key:"solution_04",value:function(t,l,o,n){var u=a.enemyBulletType[t],i=e.controller.enemyBulletPools.get(t),c=e.controller.getBullet(i,r.MONSTER,t);if(c&&c.isValid){c.parent=n,c.setPosition(o);var s=u.bulletSolution;s[0].solution(c,{judgement:s[0].params.judgement,callback:function(){i.put(c)}})}}}]),e}(),"controller",void 0),i=c))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/Bullets.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ClientEventManager.ts","./ClientEventList.ts","./BattleType.ts","./Main.ts","./TweenManager.ts","./BattleModule.ts"],(function(t){var e,n,i,s,o,a,l,c,u,h,r,d,g,f,p,v,C,y,k;return{setters:[function(t){e=t.inherits,n=t.createSuper,i=t.classCallCheck,s=t.defineProperty,o=t.assertThisInitialized,a=t.createClass},function(t){l=t.cclegacy,c=t._decorator,u=t.Collider2D,h=t.Contact2DType,r=t.isValid,d=t.Vec3,g=t.Component},function(t){f=t.ClientEventManager},function(t){p=t.ClientEventList},function(t){v=t.BulletOwnerType},function(t){C=t.Main},function(t){y=t.TweenManager},function(t){k=t.BattleModule}],execute:function(){var B;l._RF.push({},"6f290HiXsdF97MYOT558Xye","Bullets",void 0);var T=c.ccclass;c.property,t("Bullets",T("Bullets")(B=function(t){e(c,t);var l=n(c);function c(){var t;i(this,c);for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t=l.call.apply(l,[this].concat(n)),s(o(t),"bulletOwnerType",void 0),s(o(t),"bulletName",void 0),s(o(t),"isContacting",!1),s(o(t),"destroyCallback",void 0),s(o(t),"bulletData",void 0),s(o(t),"checkOffsetDistance",100),s(o(t),"pauseChangeState",0),s(o(t),"logicRunning",!0),s(o(t),"dataIndex",void 0),s(o(t),"fromPool",void 0),t}return a(c,[{key:"start",value:function(){var t=this.getComponent(u);t&&(t.on(h.BEGIN_CONTACT,this.onBeginContact,this),t.on(h.END_CONTACT,this.onEndContact,this))}},{key:"init",value:function(t){this.destroyCallback=t}},{key:"changePosition",value:function(t){r(this.node)&&this.node.setPosition(this.node.position.add(new d(t[0],t[1])))}},{key:"onBeginContact",value:function(t,e,n){if(!this.isContacting&&this.bulletOwnerType==v.HERO)return f.dispatchEvent(p.Bullet.hit,t,e),void(this.isContacting=!0);this.bulletOwnerType==v.MONSTER&&f.dispatchEvent(p.Bullet.hit,t,e)}},{key:"onEndContact",value:function(t,e,n){}},{key:"checkAutoDestroy",value:function(){return this.node.position.x<-.5*k.BattleViewSize.width-this.checkOffsetDistance||this.node.position.x>.5*k.BattleViewSize.width+this.checkOffsetDistance||this.node.position.y<-.5*k.BattleViewSize.height-this.checkOffsetDistance||this.node.position.y>.5*k.BattleViewSize.height+this.checkOffsetDistance}},{key:"update",value:function(t){return this.checkAutoDestroy()&&(this.destroyCallback&&this.destroyCallback(),this.fromPool.put(this.node)),C.getInstance().isLogicRunning||0!=this.pauseChangeState?C.getInstance().isLogicRunning&&1==this.pauseChangeState?(this.pauseChangeState=0,y.resumeAllNodeTween(this.node),void(this.logicRunning=!0)):void this.logicRunning:(this.pauseChangeState=1,y.pauseAllNodeTween(this.node),void(this.logicRunning=!1))}}]),c}(g))||B);l._RF.pop()}}}));

System.register("chunks:///_virtual/CameraShake.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,a,i,o,r,s,h,c,l,u,k;return{setters:[function(e){t=e.defineProperty,n=e.inherits,a=e.createSuper,i=e.classCallCheck,o=e.assertThisInitialized,r=e.createClass},function(e){s=e.cclegacy,h=e._decorator,c=e.tween,l=e.Vec3,u=e.Camera,k=e.Component}],execute:function(){var v,S;s._RF.push({},"a68faIbSMtLA63Y+3Xnno+r","CameraShake",void 0);var f=h.ccclass;h.property,e("CameraShake",f("CameraShake")((S=function(e){n(h,e);var s=a(h);function h(){var e;i(this,h);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=s.call.apply(s,[this].concat(a)),t(o(e),"isShake",!1),e}return r(h,[{key:"onLoad",value:function(){h.instance=this}},{key:"TweenShake",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isShake||(this.isShake=!0,1==t?this.Shake1(e):2==t&&this.Shake2(e))}},{key:"Shake1",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;c(this.node).by(.02,{worldPosition:new l(5,5)}).by(.02,{worldPosition:new l(-10,-10)}).by(.02,{worldPosition:new l(5,5)}).union().repeat(t).call((function(){e.isShake=!1})).start()}},{key:"Shake2",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,n=this.getComponent(u),a=n.orthoHeight;c(n).to(.02,{orthoHeight:a+5}).to(.02,{orthoHeight:a-5}).to(.02,{orthoHeight:a}).union().repeat(t).call((function(){e.isShake=!1})).start()}}],[{key:"Instance",get:function(){return this.instance}}]),h}(k),t(S,"instance",void 0),v=S))||v);s._RF.pop()}}}));

System.register("chunks:///_virtual/ClientEventList.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,s,r,a;return{setters:[function(t){e=t.createClass,s=t.classCallCheck,r=t.defineProperty},function(t){a=t.cclegacy}],execute:function(){a._RF.push({},"0122dcuDRpHo5b6Xw9qToSZ","ClientEventList",void 0);var n=t("ClientEventList",e((function t(){s(this,t)})));r(n,"Main",{preloadFinish:"main-preloadFinish",restart:"main-restart"}),r(n,"Battle",{start:"battle-start",end:"battle-end",heroDead:"battle-heroDead",bossDead:"batle-bossDead"}),r(n,"Bullet",{hit:"bullet-hit"}),r(n,"Boss",{hitten:"boss-hitten",hittenResp:"boss-hittenResp",ready:"boss-ready",attack:"boss-attack"}),r(n,"Monster",{hitten:"monster-hitten",hittenResp:"monster-hittenResp",attack:"monster-attack"}),r(n,"Hero",{strike:"hero-strike",dead:"hero-dead",changeState:"hero-changeState",reset:"hero-reset",restoreHp:"hero-restoreHp"}),r(n,"Prop",{touch:"prop-touch"}),a._RF.pop()}}}));

System.register("chunks:///_virtual/ClientEventManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,n,t,a,l;return{setters:[function(e){r=e.defineProperty,n=e.createClass,t=e.classCallCheck},function(e){a=e.cclegacy,l=e._decorator}],execute:function(){var c,i;a._RF.push({},"0598eNfZrtPxqoiZFxLcCSI","ClientEventManager",void 0);var o=l.ccclass;l.property,e("ClientEventManager",o("ClientEventManager")((r(i=function(){function e(){t(this,e)}return n(e,null,[{key:"on",value:function(r,n,t){var a={handler:n,target:t},l=e._handlers[r];l||(l=[],e._handlers[r]=l);for(var c=0;c<l.length;c++)if(!l[c])return l[c]=a,c;return l.push(a),l.length}},{key:"off",value:function(r,n,t){var a=e._handlers[r];if(a)for(var l=0;l<a.length;l++){var c=a[l];if(c.handler===n&&(!t||t===c.target)){a.splice(l,1);break}}}},{key:"dispatchEvent",value:function(r){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];var l,c=e._handlers[r],i=[];for(l=0;l<arguments.length;l++)i.push(arguments[l]);if(c)for(l=0;l<c.length;l++){var o=c[l];o.handler&&o.handler.apply(o.target,i)}}}]),e}(),"_handlers",{}),c=i))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,i,n,s,l,r,a,g,h,c,p,C,d,u,m,v,f,L,M,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inherits,i=e.createSuper,n=e.classCallCheck,s=e.initializerDefineProperty,l=e.assertThisInitialized,r=e.defineProperty,a=e.createClass},function(e){g=e.cclegacy,h=e._decorator,c=e.Node,p=e.Color,C=e.Canvas,d=e.UITransform,u=e.instantiate,m=e.Label,v=e.RichText,f=e.Toggle,L=e.Button,M=e.director,b=e.Component}],execute:function(){var T,S,x,y,E,I,A,D,B;g._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var k=h.ccclass,w=h.property;e("DebugViewRuntimeControl",(T=k("internal.DebugViewRuntimeControl"),S=w(c),x=w(c),y=w(c),T((A=t((I=function(e){o(g,e);var t=i(g);function g(){var e;n(this,g);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),s(l(e),"compositeModeToggle",A,l(e)),s(l(e),"singleModeToggle",D,l(e)),s(l(e),"EnableAllCompositeModeButton",B,l(e)),r(l(e),"_single",0),r(l(e),"strSingle",["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"]),r(l(e),"strComposite",["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"]),r(l(e),"strMisc",["CSM Layer Coloration","Lighting With Albedo"]),r(l(e),"compositeModeToggleList",[]),r(l(e),"singleModeToggleList",[]),r(l(e),"miscModeToggleList",[]),r(l(e),"textComponentList",[]),r(l(e),"labelComponentList",[]),r(l(e),"textContentList",[]),r(l(e),"hideButtonLabel",void 0),r(l(e),"_currentColorIndex",0),r(l(e),"strColor",["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"]),r(l(e),"color",[p.WHITE,p.BLACK,p.RED,p.GREEN,p.BLUE]),e}return a(g,[{key:"start",value:function(){if(this.node.parent.getComponent(C)){var e=this.node.parent.getComponent(d),t=.5*e.width,o=.5*e.height,i=.1*t-t,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=u(s);l.parent=this.node,l.name="Buttons";var r=u(s);r.parent=this.node,r.name="Titles";for(var a=0;a<2;a++){var g=u(this.EnableAllCompositeModeButton.getChildByName("Label"));g.setPosition(i+(a>0?450:150),n,0),g.setScale(.75,.75,.75),g.parent=r;var h=g.getComponent(m);h.string=a?"----------Composite Mode----------":"----------Single Mode----------",h.color=p.WHITE,h.overflow=0,this.labelComponentList[this.labelComponentList.length]=h}n-=20;for(var c=0,M=0;M<this.strSingle.length;M++,c++){M===this.strSingle.length>>1&&(i+=200,c=0);var b=M?u(this.singleModeToggle):this.singleModeToggle;b.setPosition(i,n-20*c,0),b.setScale(.5,.5,.5),b.parent=this.singleModeToggle.parent;var T=b.getComponentInChildren(v);T.string=this.strSingle[M],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,b.on(f.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[M]=b}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(L.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(m);this.labelComponentList[this.labelComponentList.length]=S;var x=u(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(L.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(m)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var y=u(this.EnableAllCompositeModeButton);y.setPosition(i+200,n,0),y.setScale(.5,.5,.5),y.on(L.EventType.CLICK,this.hideUI,this),y.parent=this.node.parent,(S=y.getComponentInChildren(m)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var E=0;E<this.strMisc.length;E++){var I=u(this.compositeModeToggle);I.setPosition(i,n-20*E,0),I.setScale(.5,.5,.5),I.parent=s;var A=I.getComponentInChildren(v);A.string=this.strMisc[E],this.textComponentList[this.textComponentList.length]=A,this.textContentList[this.textContentList.length]=A.string,I.getComponent(f).isChecked=!!E,I.on(f.EventType.TOGGLE,E?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[E]=I}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?u(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var k=B.getComponentInChildren(v);k.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=k,this.textContentList[this.textContentList.length]=k.string,B.on(f.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")}},{key:"isTextMatched",value:function(e,t){var o=new String(e),i=o.search(">");return-1===i?e===t:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===t}},{key:"toggleSingleMode",value:function(e){for(var t=M.root.debugView,o=e.getComponentInChildren(v),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(t.singleMode=i)}},{key:"toggleCompositeMode",value:function(e){for(var t=M.root.debugView,o=e.getComponentInChildren(v),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&t.enableCompositeMode(i,e.isChecked)}},{key:"toggleLightingWithAlbedo",value:function(e){M.root.debugView.lightingWithAlbedo=e.isChecked}},{key:"toggleCSMColoration",value:function(e){M.root.debugView.csmLayerColoration=e.isChecked}},{key:"enableAllCompositeMode",value:function(e){var t=M.root.debugView;t.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(f).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(f);i.isChecked=!1,t.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(f)).isChecked=!0,t.lightingWithAlbedo=!0}},{key:"hideUI",value:function(e){var t=this.node.getChildByName("Titles"),o=!t.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,t.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"}},{key:"changeTextColor",value:function(e){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var t=0;t<this.textComponentList.length;t++)this.textComponentList[t].string=this.strColor[this._currentColorIndex]+this.textContentList[t]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]}},{key:"onLoad",value:function(){}},{key:"update",value:function(e){}}]),g}(b)).prototype,"compositeModeToggle",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(I.prototype,"singleModeToggle",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(I.prototype,"EnableAllCompositeModeButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=I))||E));g._RF.pop()}}}));

System.register("chunks:///_virtual/DragonBoneManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,a,t,c,o;return{setters:[function(n){e=n.createClass,a=n.defineProperty,t=n.classCallCheck},function(n){c=n.cclegacy,o=n.dragonBones}],execute:function(){c._RF.push({},"0dfdcUXH2JMcaLw2lcOriDo","DragonBoneManager",void 0);var i=n("DragonBoneManager",function(){function n(){t(this,n)}return e(n,null,[{key:"getInstance",value:function(){return null==n.instance&&(n.instance=new n),n.instance}},{key:"playAnimationWithCallBack",value:function(n,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,t=arguments.length>3?arguments[3]:void 0;t&&n.once(o.EventObject.COMPLETE,t,n),n.playAnimation(e,a)}}]),n}());a(i,"instance",null),c._RF.pop()}}}));

System.register("chunks:///_virtual/HeroBulletHit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationClipManager.ts"],(function(e){var t,n,i,r,o,l,a,c;return{setters:[function(e){t=e.inherits,n=e.createSuper,i=e.classCallCheck,r=e.createClass},function(e){o=e.cclegacy,l=e._decorator,a=e.Component},function(e){c=e.AnimationClipManager}],execute:function(){var u;o._RF.push({},"e8da1lGV8lPtYCeiv+539nT","HeroBulletHit",void 0);var s=l.ccclass;l.property,e("HeroBulletHit",s("HeroBulletHit")(u=function(e){t(l,e);var o=n(l);function l(){return i(this,l),o.apply(this,arguments)}return r(l,[{key:"onAnimCompleted",value:function(){c.getInstance().putAnimation(this.node)}}]),l}(a))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/IBomb.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationClipManager.ts"],(function(n){var e,t,o,i,r,a,c,s;return{setters:[function(n){e=n.inherits,t=n.createSuper,o=n.classCallCheck,i=n.createClass},function(n){r=n.cclegacy,a=n._decorator,c=n.Component},function(n){s=n.AnimationClipManager}],execute:function(){var u;r._RF.push({},"e686bXTBXlLg7Aga6POZxcI","IBomb",void 0);var l=a.ccclass;a.property,n("IBomb",l("IBomb")(u=function(n){e(a,n);var r=t(a);function a(){return o(this,a),r.apply(this,arguments)}return i(a,[{key:"onAnimCompleted",value:function(){s.getInstance().putAnimation(this.node)}}]),a}(c))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/LoadManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,a,s,r,l,u,o;return{setters:[function(e){n=e.defineProperty,t=e.createClass,a=e.classCallCheck,s=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){l=e.cclegacy,u=e._decorator,o=e.assetManager}],execute:function(){var i,c;l._RF.push({},"53863IhjkpP5YwpZRM2F0+S","LoadManager",void 0);var d=u.ccclass,p=(u.property,e("BundleNames",function(e){return e.BundleBattle="BundleBattle",e.BundleUI="BundleUI",e}({})));e("LoadManager",d("LoadManager")((c=function(){function e(){a(this,e),n(this,"assetMap",new Map),n(this,"bundleMap",new Map),n(this,"bundleList",[p.BundleUI,p.BundleBattle])}var l;return t(e,[{key:"_loadAsync",value:function(e,n,t){var a=this,s=e+"/"+n;return new Promise((function(r,l){var u=a.assetMap.get(s);u?(u.addRef(),r(u)):o.loadBundle(e,(function(e,u){if(e)console.log(e),l(e);else{if("function"!=typeof t)return void console.error("error assetType: ",t);u.load(n,t,(function(e,n){e?(console.log(e),l(e)):(a.assetMap.set(s,n),n.addRef(),r(n))}))}}))}))}},{key:"_preloadBundleAsync",value:function(e){var n=this;return new Promise((function(t,a){var s=n.bundleMap.get(e);s?t(s):o.loadBundle(e,(function(s,r){s?(console.log(s),a(s)):(n.bundleMap.set(e,r),t(r))}))}))}},{key:"preloadAllBundle",value:function(){for(var e=[],n=0;n<this.bundleList.length;n++){var t=this.bundleList[n];e.push(this._preloadBundleAsync(t))}return Promise.all(e)}},{key:"loadAssetFromBundle",value:(l=s(r().mark((function e(n,t,a){var s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.bundleList.includes(n)){e.next=3;break}return console.error("bundle dosen't exist :"+n),e.abrupt("return",null);case 3:return e.next=5,this._loadAsync(n,t,a);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n,t){return l.apply(this,arguments)})},{key:"realeaseAsset",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e+"/"+n;if(this.assetMap.has(a)){var s=this.assetMap.get(a);null==s||s.decRef(),t&&(o.releaseAsset(s),this.assetMap.delete(a))}}},{key:"clear",value:function(){this.assetMap.clear(),this.bundleMap.clear()}}],[{key:"instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}(),n(c,"_instance",null),i=c))||i);l._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./BBomb.ts","./BugBomb.ts","./HeroBulletHit.ts","./IBomb.ts","./MonsterBulletHit.ts","./SkillBomb.ts","./PrefabConfig.ts","./ClientEventList.ts","./AnimationType.ts","./BattleType.ts","./AnimationClipManager.ts","./AudioManager.ts","./BulletFactory.ts","./ClientEventManager.ts","./DragonBoneManager.ts","./LoadManager.ts","./TweenManager.ts","./UIManager.ts","./Main.ts","./CameraShake.ts","./PlayableHtml.ts","./QuadTree.ts","./ScreenAdapter.ts","./Tools.ts","./ActorBase.ts","./NodeBoss.ts","./NodeHero.ts","./NodeMonster.ts","./BattleController.ts","./BattleModule.ts","./BattleView.ts","./BattleProps.ts","./Bullets.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./ClientEventManager.ts","./ClientEventList.ts","./PrefabConfig.ts","./AnimationClipManager.ts","./AudioManager.ts"],(function(n){var t,e,a,i,r,s,o,l,c,u,h,f,d,v,g,M,p,y,C;return{setters:[function(n){t=n.defineProperty,e=n.inherits,a=n.createSuper,i=n.classCallCheck,r=n.assertThisInitialized,s=n.createClass,o=n.asyncToGenerator,l=n.regeneratorRuntime},function(n){c=n.cclegacy,u=n._decorator,h=n.find,f=n.TweenSystem,d=n.Component},function(n){v=n.UIManager},function(n){g=n.ClientEventManager},function(n){M=n.ClientEventList},function(n){p=n.PrefabConfig},function(n){y=n.AnimationClipManager},function(n){C=n.AudioManager}],execute:function(){var B,m;c._RF.push({},"d01115nibJIQYSU7CrqsroL","Main",void 0);var k=u.ccclass;u.property,n("Main",k("Main")((m=function(n){e(d,n);var c,u=a(d);function d(){var n;return i(this,d),n=u.call(this),t(r(n),"layerBattle",void 0),t(r(n),"nodeBattle",void 0),t(r(n),"uiManager",null),t(r(n),"animationClipManager",null),t(r(n),"isLogicRunning",!0),d.instance=r(n),g.on(M.Main.preloadFinish,n.clientEventHandler,r(n)),g.on(M.Main.restart,n.clientEventHandler,r(n)),n}return s(d,[{key:"onDestroy",value:function(){g.off(M.Main.preloadFinish,this.clientEventHandler,this),g.off(M.Main.restart,this.clientEventHandler,this)}},{key:"onLoad",value:function(){this.layerBattle=h("Canvas").getChildByName("Battle"),this.uiManager=v.instance,v.instance.init((function(){g.dispatchEvent(M.Main.preloadFinish)})),this.animationClipManager=y.getInstance(),this.animationClipManager.init(),C.instance.init()}},{key:"clientEventHandler",value:function(n){switch(n){case M.Main.preloadFinish:this.createBattle();break;case M.Main.restart:this.retry()}}},{key:"retry",value:function(){var n=this;this.nodeBattle.destroy(),f.instance.ActionManager.removeAllActions(),this.layerBattle.children.length>0&&this.nodeBattle.destroy(),setTimeout((function(){n.createBattle()}))}},{key:"start",value:function(){}},{key:"createBattle",value:(c=o(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.isLogicRunning=!0,n.next=3,v.instance.createPrefab(this.layerBattle,p.LayerBattle);case 3:this.nodeBattle=n.sent;case 4:case"end":return n.stop()}}),n,this)}))),function(){return c.apply(this,arguments)})}],[{key:"getInstance",value:function(){return d.instance}}]),d}(d),t(m,"instance",null),B=m))||B);c._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBulletHit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationClipManager.ts"],(function(t){var e,n,i,r,o,a,l,c;return{setters:[function(t){e=t.inherits,n=t.createSuper,i=t.classCallCheck,r=t.createClass},function(t){o=t.cclegacy,a=t._decorator,l=t.Component},function(t){c=t.AnimationClipManager}],execute:function(){var s;o._RF.push({},"9a3897w2atPEKbu6kZ4lDIc","MonsterBulletHit",void 0);var u=a.ccclass;a.property,t("MonsterBulletHit",u("MonsterBulletHit")(s=function(t){e(a,t);var o=n(a);function a(){return i(this,a),o.apply(this,arguments)}return r(a,[{key:"onAnimCompleted",value:function(){c.getInstance().putAnimation(this.node)}}]),a}(l))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/NodeBoss.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorBase.ts","./BattleType.ts","./ClientEventManager.ts","./ClientEventList.ts","./UIManager.ts","./DragonBoneManager.ts","./AnimationType.ts","./BattleModule.ts","./Tools.ts","./Main.ts","./TweenManager.ts"],(function(t){var e,n,i,a,s,o,h,r,d,l,c,u,f,g,p,v,m,y,B,k,C,H,D,S,T,M,w,x,O;return{setters:[function(t){e=t.inherits,n=t.createSuper,i=t.classCallCheck,a=t.defineProperty,s=t.assertThisInitialized,o=t.createClass,h=t.createForOfIteratorHelper,r=t.slicedToArray},function(t){d=t.cclegacy,l=t._decorator,c=t.dragonBones,u=t.tween,f=t.instantiate,g=t.UIOpacity,p=t.Vec3,v=t.UITransform,m=t.BoxCollider2D,y=t.isValid},function(t){B=t.ActorBase},function(t){k=t.ActorType},function(t){C=t.ClientEventManager},function(t){H=t.ClientEventList},function(t){D=t.UIManager},function(t){S=t.DragonBoneManager},function(t){T=t.TweenType},function(t){M=t.BattleModule},function(t){w=t.Tools},function(t){x=t.Main},function(t){O=t.TweenManager}],execute:function(){var A;d._RF.push({},"f6376x9aMhDNYdEdSwarObq","NodeBoss",void 0);var R=l.ccclass;l.property,t("NodeBoss",R("NodeBoss")(A=function(t){e(l,t);var d=n(l);function l(){var t;return i(this,l),t=d.call(this),a(s(t),"actorType",k.BOSS),a(s(t),"isInited",!1),a(s(t),"data",void 0),a(s(t),"nodeHealth",void 0),a(s(t),"healthProgress",void 0),a(s(t),"totalHealth",1e5),a(s(t),"currentHealth",1e5),a(s(t),"hittenTime",0),a(s(t),"hittenSpecTime",1.5),a(s(t),"healthTweening",!1),a(s(t),"loadFinish",!1),a(s(t),"originPos",void 0),a(s(t),"logicRunning",!0),a(s(t),"pauseChangeState",0),a(s(t),"isSendGameEnd",!1),a(s(t),"isGod",!1),a(s(t),"attackData",void 0),a(s(t),"maxScale",.9),a(s(t),"minScale",.7),a(s(t),"moveOffsetX",[-75,75]),a(s(t),"moveOffsetY",[-75,75]),a(s(t),"scaleDir",0),t}return o(l,[{key:"init",value:function(t){var e=this;if(!this.isInited){this.isGod=!1,this.isInited=!0,this.register(),this.data=t,this.nodeHealth=this.createHealth(t.maxHealth),this.originPos=t.position;var n=this.node.getComponent(c.ArmatureDisplay);if(u(this.node).to(1,{position:t.position},{easing:T.quadOut}).call((function(){S.playAnimationWithCallBack(n,t.dragonBone.show[0],1,(function(){S.playAnimationWithCallBack(n,t.dragonBone.standBy[0],0),e.loadFinish=!0,C.dispatchEvent(H.Boss.ready,t)}))})).start(),null!=this.data.dragonBone.attack){this.attackData=w.deepClone(this.data.dragonBone.attack);var i,a=h(this.attackData);try{for(a.s();!(i=a.n()).done;){i.value.cd=0}}catch(t){a.e(t)}finally{a.f()}}}}},{key:"createHealth",value:function(t){var e=f(D.instance.healthPrefab);return e.getComponent(g).opacity=0,e.parent=this.node,this.totalHealth=t,this.currentHealth=t,e.setPosition(new p(0,-this.node.getComponent(v).height/2)),e}},{key:"register",value:function(){C.on(H.Boss.hitten,this.handler,this),C.on(H.Hero.dead,this.handler,this)}},{key:"onDestroy",value:function(){C.off(H.Boss.hitten,this.handler,this),C.off(H.Hero.dead,this.handler,this)}},{key:"handler",value:function(t,e,n){switch(t){case H.Boss.hitten:this.onHitten(e,n);break;case H.Hero.dead:this.god(!0)}}},{key:"god",value:function(t){this.isGod=t}},{key:"onHitten",value:function(t,e){if(!this.isGod){this.hittenTime=0,this.currentHealth=this.currentHealth-t.damage<=0?0:this.currentHealth-t.damage;this.currentHealth-t.damage<=0?this.currentHealth:t.damage;var n=null==e?new p(0,0):e;M.createLabelHitHealth(t,t.damage,n,this.node.parent),C.dispatchEvent(H.Boss.hittenResp,this.currentHealth),this.currentHealth<=0&&(this.logicRunning=!1,this.isSendGameEnd||(this.isSendGameEnd=!0,C.dispatchEvent(H.Battle.end,{position:new p(this.node.position.x+this.node.getComponent(m).offset.x,this.node.position.y+this.node.getComponent(m).offset.y),width:this.node.getComponent(m).size.width,height:this.node.getComponent(m).size.height},this.node)))}}},{key:"clamp",value:function(t,e){var n=r(e,2),i=n[0],a=n[1];return Math.min(Math.max(t,i),a)}},{key:"getRandomOffset",value:function(t,e){return Math.random()*(e-t)+t}},{key:"randomMove",value:function(){var t=this.getRandomOffset(-3,3),e=this.getRandomOffset(-3,3),n=new p(this.clamp(this.node.position.x+t,[this.originPos.x+this.moveOffsetX[0],this.originPos.x+this.moveOffsetX[1]]),this.clamp(this.node.position.y+e,[this.originPos.y+this.moveOffsetY[0],this.originPos.y+this.moveOffsetY[1]]),this.node.position.z);this.node.setPosition(n)}},{key:"update",value:function(t){var e=this;if(this.loadFinish){if(!x.getInstance().isLogicRunning&&0==this.pauseChangeState)return this.pauseChangeState=1,O.pauseAllNodeTween(this.node),void(this.logicRunning=!1);if(x.getInstance().isLogicRunning&&1==this.pauseChangeState)return this.pauseChangeState=0,O.resumeAllNodeTween(this.node),void(this.logicRunning=!0);if(this.logicRunning){if(this.hittenTime+=t,this.node.scale.x>=this.maxScale&&(this.scaleDir=1),this.node.scale.x<=this.minScale&&(this.scaleDir=0),1==this.scaleDir){var n=w.deepClone(this.node.scale);this.node.setScale(n.add(new p(-.003,-.003)))}else{var i=w.deepClone(this.node.scale);this.node.setScale(i.add(new p(.003,.003)))}if(this.randomMove(),null!=this.attackData)for(var a=function(){if(e.attackData[s].cd+=t,e.attackData[s].cd>=e.data.dragonBone.attack[s].cd){if(e.attackData[s].cd=0,y(e.node)){var n=e.node.getComponent(c.ArmatureDisplay);S.playAnimationWithCallBack(n,e.attackData[s].animation,1,(function(){S.playAnimationWithCallBack(n,e.data.dragonBone.standBy[0],0)}))}C.dispatchEvent(H.Boss.attack,e.node,e.data.solution.bullet[s])}},s=0;s<this.attackData.length;s++)a()}}}}]),l}(B))||A);d._RF.pop()}}}));

System.register("chunks:///_virtual/NodeHero.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorBase.ts","./BattleType.ts","./ClientEventManager.ts","./ClientEventList.ts","./NodeBoss.ts","./NodeMonster.ts","./BattleModule.ts","./BattleProps.ts","./DragonBoneManager.ts","./AudioManager.ts"],(function(t){var e,n,a,i,r,o,s,h,u,c,l,y,d,H,f,p,v,g,m,B,T,k,F,C,N;return{setters:[function(t){e=t.inherits,n=t.createSuper,a=t.classCallCheck,i=t.defineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,h=t._decorator,u=t.Collider2D,c=t.Contact2DType,l=t.dragonBones,y=t.isValid},function(t){d=t.ActorBase},function(t){H=t.ActorType,f=t.HeroType,p=t.HeroTypeEnum},function(t){v=t.ClientEventManager},function(t){g=t.ClientEventList},function(t){m=t.NodeBoss},function(t){B=t.NodeMonster},function(t){T=t.BattleModule},function(t){k=t.BattleProps},function(t){F=t.DragonBoneManager},function(t){C=t.AudioManager,N=t.AudioNames}],execute:function(){var S;s._RF.push({},"f4020EVlvxLMLHeynyARO+v","NodeHero",void 0);var A=h.ccclass,E=(h.property,function(t){return t[t.NO=-1]="NO",t[t.START=0]="START",t[t.FURYING=1]="FURYING",t[t.END=2]="END",t}(E||{}));t("NodeHero",A("NodeHero")(S=function(t){e(h,t);var s=n(h);function h(){var t;a(this,h);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return t=s.call.apply(s,[this].concat(n)),i(r(t),"actorType",H.HERO),i(r(t),"currentHealth",void 0),i(r(t),"maxHealth",void 0),i(r(t),"drangonBone",void 0),i(r(t),"isFury",!1),i(r(t),"furyState",E.NO),i(r(t),"furyOverTime",6),i(r(t),"furyTime",0),t}return o(h,[{key:"onLoad",value:function(){this.currentHealth=T.heroType[f.DEFAULT].maxHealth,this.maxHealth=T.heroType[f.DEFAULT].maxHealth;var t=this.getComponent(u);t&&t.on(c.BEGIN_CONTACT,this.onBeginContact,this),v.on(g.Hero.changeState,this.changeState,this),v.on(g.Hero.restoreHp,this.restoreHp,this),this.drangonBone=this.node.getComponent(l.ArmatureDisplay),this.isFury=!1,this.setFuryState(E.NO)}},{key:"onDestroy",value:function(){v.off(g.Hero.changeState,this.changeState,this),v.off(g.Hero.restoreHp,this.restoreHp,this)}},{key:"init",value:function(t){}},{key:"register",value:function(){}},{key:"changeState",value:function(t,e){this.isFury=e==p.heroType3,this.resetFuryTime()}},{key:"restoreHp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maxHealth;this.currentHealth=this.currentHealth+e>=this.maxHealth?this.maxHealth:this.currentHealth+e,v.dispatchEvent(g.Hero.strike,this.currentHealth/this.maxHealth,!1)}},{key:"resetFuryTime",value:function(){this.furyTime=0}},{key:"setFuryState",value:function(t){this.furyState=t}},{key:"getHealthProgress",value:function(t){return this.currentHealth=this.currentHealth-t.damage<0?0:this.currentHealth-t.damage,this.checkHeroDead(),this.currentHealth/this.maxHealth}},{key:"onHitten",value:function(t,e){this.currentHealth=this.currentHealth-t.damage<0?0:this.currentHealth-t.damage,v.dispatchEvent(g.Hero.strike,this.currentHealth/this.maxHealth),this.checkHeroDead()}},{key:"checkHeroDead",value:function(){return this.currentHealth<=0&&(v.dispatchEvent(g.Hero.dead,this.node),!0)}},{key:"onBeginContact",value:function(t,e,n){if(null==e.node.getComponent(m)&&null==e.node.getComponent(B)||this.onHitten({damage:1e3,isCrit:!1}),null!=e.node.getComponent(k)){var a=e.node.getComponent(k).type;v.dispatchEvent(g.Prop.touch,a,e.node)}}},{key:"checkFury",value:function(t){var e=this;this.isFury&&(this.isFury&&this.furyState==E.NO&&(C.instance.playOneShot(N.weapon_up),this.setFuryState(E.START),F.playAnimationWithCallBack(this.drangonBone,"BaoZou_Start",1,(function(){e.setFuryState(E.FURYING),F.playAnimationWithCallBack(e.drangonBone,"BaoZou",-1)}))),this.isFury&&this.furyState==E.FURYING&&(this.furyTime>=this.furyOverTime?(this.isFury=!1,this.setFuryState(E.END),v.dispatchEvent(g.Hero.reset,p.heroType2),this.setFuryState(E.NO),F.playAnimationWithCallBack(this.drangonBone,"BaoZou_End",1,(function(){F.playAnimationWithCallBack(e.drangonBone,"putong",0)}))):this.furyTime+=t))}},{key:"update",value:function(t){y(this.node)&&this.node.active&&this.checkFury(t)}}]),h}(d))||S);s._RF.pop()}}}));

System.register("chunks:///_virtual/NodeMonster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActorBase.ts","./BattleType.ts","./ClientEventManager.ts","./ClientEventList.ts","./UIManager.ts","./DragonBoneManager.ts","./BattleModule.ts","./Tools.ts","./Main.ts","./TweenManager.ts"],(function(t){var e,a,n,i,o,s,h,r,l,c,u,d,g,p,f,v,m,y,H,k,C,T,B,D,M,S,w;return{setters:[function(t){e=t.inherits,a=t.createSuper,n=t.classCallCheck,i=t.defineProperty,o=t.assertThisInitialized,s=t.createClass,h=t.createForOfIteratorHelper},function(t){r=t.cclegacy,l=t._decorator,c=t.ProgressBar,u=t.dragonBones,d=t.instantiate,g=t.UIOpacity,p=t.Vec3,f=t.UITransform,v=t.tween,m=t.isValid},function(t){y=t.ActorBase},function(t){H=t.ActorType},function(t){k=t.ClientEventManager},function(t){C=t.ClientEventList},function(t){T=t.UIManager},function(t){B=t.DragonBoneManager},function(t){D=t.BattleModule},function(t){M=t.Tools},function(t){S=t.Main},function(t){w=t.TweenManager}],execute:function(){var I;r._RF.push({},"4cd63b5lzhMdLQcSNLbRNcs","NodeMonster",void 0);var N=l.ccclass;l.property,t("NodeMonster",N("NodeMonster")(I=function(t){e(l,t);var r=a(l);function l(){var t;return n(this,l),t=r.call(this),i(o(t),"actorType",H.MONSTER),i(o(t),"uniqueId",void 0),i(o(t),"data",void 0),i(o(t),"isInited",!1),i(o(t),"nodeHealth",void 0),i(o(t),"healthProgress",void 0),i(o(t),"totalHealth",1e5),i(o(t),"currentHealth",1e5),i(o(t),"hittenTime",1e3),i(o(t),"hittenSpecTime",1.5),i(o(t),"healthTweening",!1),i(o(t),"loadFinish",!1),i(o(t),"logicRunning",!0),i(o(t),"pauseChangeState",0),i(o(t),"isDead",!1),i(o(t),"isGod",!1),i(o(t),"attackData",void 0),t}return s(l,[{key:"init",value:function(t){var e=this;if(!this.isInited){this.isGod=!1,this.isInited=!0,this.register(),this.data=t.monsterData,this.uniqueId=M.generateUUID(),this.nodeHealth=this.createHealth(t.monsterData.maxHealth),this.healthProgress=this.nodeHealth.getChildByPath("ProgressBar").getComponent(c),this.updateHealth();var a=t.monsterData.solution.fly[0];a&&a(this.node,(function(){1==t.monsterData.autoDestroy&&t.planeSolution_callback&&t.planeSolution_callback()}));var n=this.node.getComponent(u.ArmatureDisplay);if(B.playAnimationWithCallBack(n,t.monsterData.dragonBone.show[0],1,(function(){B.playAnimationWithCallBack(n,t.monsterData.dragonBone.standBy[0],0),e.loadFinish=!0})),null!=this.data.dragonBone.attack){this.attackData=M.deepClone(this.data.dragonBone.attack);var i,o=h(this.attackData);try{for(o.s();!(i=o.n()).done;){i.value.cd=0}}catch(t){o.e(t)}finally{o.f()}}}}},{key:"createHealth",value:function(t){var e=d(T.instance.healthPrefab);return e.getComponent(g).opacity=0,e.parent=this.node,this.totalHealth=t,this.currentHealth=t,e.setPosition(new p(0,-this.node.getComponent(f).height/2)),e}},{key:"updateHealth",value:function(){this.healthProgress.progress=this.currentHealth/this.totalHealth}},{key:"register",value:function(){k.on(C.Monster.hitten,this.handler,this)}},{key:"onDestroy",value:function(){k.off(C.Monster.hitten,this.handler,this)}},{key:"handler",value:function(t,e,a,n){switch(t){case C.Monster.hitten:this.onHitten(e,a,n);break;case C.Hero.dead:this.god(!0)}}},{key:"god",value:function(t){this.isGod=t}},{key:"onHitten",value:function(t,e,a){if(a&&this.uniqueId==a&&!(this.isGod||this.currentHealth<=0)){this.hittenTime=0,this.currentHealth=this.currentHealth-t.damage<=0?0:this.currentHealth-t.damage,this.updateHealth();this.currentHealth-t.damage<=0?this.currentHealth:t.damage;var n=null==e?new p(0,0):e;t.damage>0&&D.createLabelHitHealth(t,t.damage,n,this.node.parent),this.currentHealth<=0&&(this.logicRunning=!1,this.isDead||(this.isDead=!0,k.dispatchEvent(C.Monster.hittenResp,this.currentHealth<=0,n,this.node),this.node.destroy()))}}},{key:"changeNodeHealthState",value:function(t){var e=this;t?v(this.nodeHealth.getComponent(g)).to(.13,{opacity:255}).call((function(){e.healthTweening=!1})).start():v(this.nodeHealth.getComponent(g)).to(.13,{opacity:0}).call((function(){e.healthTweening=!1})).start()}},{key:"checkHealthBar",value:function(){if(this.hittenTime>=this.hittenSpecTime&&this.nodeHealth.getComponent(g).opacity>0&&!this.healthTweening)return this.healthTweening=!0,void this.changeNodeHealthState(!1);this.hittenTime<this.hittenSpecTime&&this.nodeHealth.getComponent(g).opacity<=0&&!this.healthTweening&&(this.healthTweening=!0,this.changeNodeHealthState(!0))}},{key:"update",value:function(t){var e=this;if(this.loadFinish){if(!S.getInstance().isLogicRunning&&0==this.pauseChangeState)return this.pauseChangeState=1,w.pauseAllNodeTween(this.node),void(this.logicRunning=!1);if(S.getInstance().isLogicRunning&&1==this.pauseChangeState)return this.pauseChangeState=0,w.resumeAllNodeTween(this.node),void(this.logicRunning=!0);if(this.logicRunning&&(this.hittenTime+=t,this.checkHealthBar(),null!=this.attackData))for(var a=function(){if(e.attackData[n].cd+=t,e.attackData[n].cd>=e.data.dragonBone.attack[n].cd){if(e.attackData[n].cd=0,m(e.node)){var a=e.node.getComponent(u.ArmatureDisplay);B.playAnimationWithCallBack(a,e.attackData[n].animation,1,(function(){B.playAnimationWithCallBack(a,e.data.dragonBone.standBy[0],0)}))}k.dispatchEvent(C.Monster.attack,e.node,e.data.solution.bullet[n])}},n=0;n<this.attackData.length;n++)a()}}}]),l}(y))||I);r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayableHtml.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var l,o,n;return{setters:[function(e){l=e.createClass,o=e.classCallCheck},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"2b872L3aNBAP7u9MwH7N/Xy","PlayableHtml",void 0);var t=e("PlayableHtml",function(){function e(){o(this,e)}return l(e,[{key:"download",value:function(){console.log("download"),window.super_html&&super_html.download()}},{key:"game_end",value:function(){console.log("game end"),window.super_html&&super_html.game_end()}},{key:"is_hide_download",value:function(){return!(!window.super_html||!super_html.is_hide_download)&&super_html.is_hide_download()}},{key:"set_google_play_url",value:function(e){window.super_html&&(super_html.google_play_url=e)}},{key:"set_app_store_url",value:function(e){window.super_html&&(super_html.appstore_url=e)}}]),e}());e("default",new t);n._RF.pop()}}}));

System.register("chunks:///_virtual/PrefabConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationType.ts","./BattleType.ts","./LoadManager.ts"],(function(e){var t,l,o,n,a,u,p,B,d,s,b,r,f;return{setters:[function(e){t=e.createClass,l=e.classCallCheck,o=e.defineProperty},function(e){n=e.cclegacy,a=e.Prefab,u=e.Vec3,p=e.SpriteAtlas,B=e.Font,d=e.AudioClip},function(e){s=e.AnimationClipNames},function(e){b=e.BossType,r=e.MonsterType},function(e){f=e.BundleNames}],execute:function(){var i,c,m,_,h,y,P,H,A,C,v;n._RF.push({},"04db09BhOVCSLnQFupn029o","PrefabConfig",void 0),i=s.HeroBulletHit,c=s.IBomb,m=s.SkillBomb,_=s.BBomb,h=s.BugBomb,y=s.MonsterBulletHit,P=s.WeaponUp,H=s.HpUp,A=b.M_C_BOSS,C=r.M_C_C1,v=r.M_C_XZF;var M=e("PrefabConfig",t((function e(){l(this,e)})));o(M,"LayerBattle",{bundle:f.BundleBattle,path:"Prefab/UI/LayerBattle",type:a,component:"BattleView",startPos:null}),o(M,i,{bundle:f.BundleBattle,path:"Prefab/Effect/HeroBulletHit",type:a,component:s.HeroBulletHit,startPos:null}),o(M,c,{bundle:f.BundleBattle,path:"Prefab/Effect/IBomb",type:a,component:s.IBomb,startPos:null}),o(M,m,{bundle:f.BundleBattle,path:"Prefab/Effect/SkillBomb",type:a,component:s.SkillBomb,startPos:null}),o(M,_,{bundle:f.BundleBattle,path:"Prefab/Effect/BBomb",type:a,component:s.BBomb,startPos:null}),o(M,h,{bundle:f.BundleBattle,path:"Prefab/Effect/BugBomb",type:a,component:s.BugBomb,startPos:null}),o(M,y,{bundle:f.BundleBattle,path:"Prefab/Effect/MonsterBulletHit",type:a,component:s.MonsterBulletHit,startPos:null}),o(M,P,{bundle:f.BundleBattle,path:"Prefab/Effect/WeaponUp",type:a,component:"BattleProps",startPos:null}),o(M,H,{bundle:f.BundleBattle,path:"Prefab/Effect/HpUp",type:a,component:"BattleProps",startPos:null}),o(M,"NodeMonsterHp",{bundle:f.BundleBattle,path:"Prefab/UI/NodeMonsterHp",type:a,component:null,startPos:null}),o(M,"LabelHitHealth",{bundle:f.BundleBattle,path:"Prefab/UI/LabelHitHealth",type:a,component:null,startPos:null}),o(M,A,{bundle:f.BundleBattle,path:"Prefab/Actor/Enemy/NodeBoss_M_C_BOSS",type:a,component:"NodeBoss",startPos:new u(0,1e3)}),o(M,C,{bundle:f.BundleBattle,path:"Prefab/Actor/Enemy/NodeMonster_M_C_C1",type:a,component:"NodeMonster",startPos:null}),o(M,v,{bundle:f.BundleBattle,path:"Prefab/Actor/Enemy/NodeMonster_M_C_XZF",type:a,component:"NodeMonster",startPos:null});var g=e("AssetsConfig",t((function e(){l(this,e)})));o(g,"atlasBossHealthBar",{bundle:f.BundleBattle,path:"Texture/Effects/Plist/bossHealthBar",type:p}),o(g,"battleHitFont",{bundle:f.BundleBattle,path:"Font/battle_piaozi_putong",type:B,fontSize:26}),o(g,"battleHitCritFont",{bundle:f.BundleBattle,path:"Font/battle_piaozi_baoji",type:B,fontSize:26}),o(g,"baozou",{bundle:f.BundleBattle,path:"Audio/effect/baozou",type:d,volume:1}),o(g,"blood_cure",{bundle:f.BundleBattle,path:"Audio/effect/blood_cure",type:d,volume:1}),o(g,"explode_boss",{bundle:f.BundleBattle,path:"Audio/effect/explode_boss",type:d,volume:1}),o(g,"explode_captain",{bundle:f.BundleBattle,path:"Audio/effect/explode_captain",type:d,volume:1}),o(g,"explode_skill",{bundle:f.BundleBattle,path:"Audio/effect/explode_skill",type:d,volume:1}),o(g,"explode_small",{bundle:f.BundleBattle,path:"Audio/effect/explode_small",type:d,volume:1}),o(g,"weapon_up",{bundle:f.BundleBattle,path:"Audio/effect/weapon_up",type:d,volume:1}),o(g,"hero_appear",{bundle:f.BundleBattle,path:"Audio/effect/hero_appear",type:d,volume:1}),o(g,"battle_bk1",{bundle:f.BundleBattle,path:"Audio/music/battle_bk1",type:d,volume:1}),o(g,"battle_lose",{bundle:f.BundleBattle,path:"Audio/effect/battle_lose",type:d,volume:1}),o(g,"battle_win",{bundle:f.BundleBattle,path:"Audio/effect/battle_win",type:d,volume:1}),o(g,"boss_come",{bundle:f.BundleBattle,path:"Audio/effect/boss_come",type:d,volume:1}),n._RF.pop()}}}));

System.register("chunks:///_virtual/QuadTree.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,i,r,s,u,a;return{setters:[function(e){n=e.createClass,t=e.classCallCheck,i=e.defineProperty,r=e.createForOfIteratorHelper},function(e){s=e.cclegacy,u=e.Rect,a=e.Vec2}],execute:function(){s._RF.push({},"d6fceE010FNmKMcfpKfalq5","QuadTree",void 0);var o=function(){function e(n){t(this,e),i(this,"boundary",void 0),i(this,"objects",void 0),i(this,"children",void 0),this.boundary=n,this.objects=[],this.children=[null,null,null,null]}return n(e,[{key:"isLeaf",value:function(){return null===this.children[0]}},{key:"subdivide",value:function(){var n=this.boundary.x,t=this.boundary.y,i=this.boundary.width/2,r=this.boundary.height/2;this.children[0]=new e(new u(n+i,t,i,r)),this.children[1]=new e(new u(n,t,i,r)),this.children[2]=new e(new u(n,t+r,i,r)),this.children[3]=new e(new u(n+i,t+r,i,r))}},{key:"insert",value:function(e){if(!this.contains(e))return!1;if(this.objects.length<4&&this.isLeaf())return this.objects.push(e),!0;this.isLeaf()&&this.subdivide();var n,t=r(this.children);try{for(t.s();!(n=t.n()).done;){if(n.value.insert(e))return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"contains",value:function(e){return this.boundary.contains(new a(e.x,e.y))}},{key:"queryRange",value:function(e){var n=[];if(!this.boundaryIntersectsRange(e))return n;var t,i=r(this.objects);try{for(i.s();!(t=i.n()).done;){var s=t.value;e.contains(new a(s.x,s.y))&&n.push(s)}}catch(e){i.e(e)}finally{i.f()}if(!this.isLeaf()){var u,o=r(this.children);try{for(o.s();!(u=o.n()).done;){var h=u.value;n=n.concat(h.queryRange(e))}}catch(e){o.e(e)}finally{o.f()}}return n}},{key:"boundaryIntersectsRange",value:function(e){return!(e.x>this.boundary.x+this.boundary.width||e.x+e.width<this.boundary.x||e.y>this.boundary.y+this.boundary.height||e.y+e.height<this.boundary.y)}}]),e}();e("QuadTree",function(){function e(n,r){t(this,e),i(this,"root",void 0),this.root=new o(new u(0,0,n,r))}return n(e,[{key:"insert",value:function(e){return this.root.insert(e)}},{key:"queryRange",value:function(e){return this.root.queryRange(e)}}]),e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,o,n,s,u,l,a,p,c,T,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inherits,r=e.createSuper,o=e.classCallCheck,n=e.initializerDefineProperty,s=e.assertThisInitialized,u=e.createClass},function(e){l=e.cclegacy,a=e._decorator,p=e.ResolutionPolicy,c=e.Enum,T=e.view,h=e.Component}],execute:function(){var y,_,D,I,g,E;l._RF.push({},"85d0c4N3/hNTKOWiuffwwrq","ScreenAdapter",void 0);var d=a.ccclass,f=a.property,S=e("ResolutionType",function(e){return e[e.EXACT_FIT=p.EXACT_FIT]="EXACT_FIT",e[e.NO_BORDER=p.NO_BORDER]="NO_BORDER",e[e.SHOW_ALL=p.SHOW_ALL]="SHOW_ALL",e[e.FIXED_HEIGHT=p.FIXED_HEIGHT]="FIXED_HEIGHT",e[e.FIXED_WIDTH=p.FIXED_WIDTH]="FIXED_WIDTH",e[e.CUSTOM=9]="CUSTOM",e}({}));e("CanvasAdapter",(y=d("CanvasAdapter"),_=f({type:c(S)}),D=f({type:c(S)}),y((E=t((g=function(e){i(l,e);var t=r(l);function l(){var e;o(this,l);for(var i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r)),n(s(e),"_resolutionType",E,s(e)),e}return u(l,[{key:"resolutionType",get:function(){return this._resolutionType},set:function(e){this._resolutionType=e,this.setAdapter()}},{key:"onLoad",value:function(){this.setAdapter()}},{key:"setAdapter",value:function(){if(S.EXACT_FIT!=this.resolutionType){var e=T.getDesignResolutionSize();if(S.CUSTOM!=this.resolutionType)T.setDesignResolutionSize(e.width,e.height,this.resolutionType);else{var t=T.getVisibleSize(),i=T.getDesignResolutionSize();t.height/t.width>i.height/i.width?T.setDesignResolutionSize(i.width,i.height,p.FIXED_WIDTH):T.setDesignResolutionSize(i.width,i.height,p.FIXED_HEIGHT)}}else console.error("该方式已不被支持")}}]),l}(h)).prototype,"_resolutionType",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.CUSTOM}}),t(g.prototype,"resolutionType",[D],Object.getOwnPropertyDescriptor(g.prototype,"resolutionType"),g.prototype),I=g))||I));l._RF.pop()}}}));

System.register("chunks:///_virtual/SkillBomb.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationClipManager.ts"],(function(n){var e,t,i,o,r,l,a,c;return{setters:[function(n){e=n.inherits,t=n.createSuper,i=n.classCallCheck,o=n.createClass},function(n){r=n.cclegacy,l=n._decorator,a=n.Component},function(n){c=n.AnimationClipManager}],execute:function(){var s;r._RF.push({},"f911devXvREbrCYpzKSK7UY","SkillBomb",void 0);var u=l.ccclass;l.property,n("SkillBomb",u("SkillBomb")(s=function(n){e(l,n);var r=t(l);function l(){return i(this,l),r.apply(this,arguments)}return o(l,[{key:"onAnimCompleted",value:function(){c.getInstance().putAnimation(this.node)}}]),l}(a))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/Tools.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadManager.ts","./CameraShake.ts"],(function(e){var t,n,r,o,a,c,i,u,l,s,f,v,y,d,h,p,g,m,k,x;return{setters:[function(e){t=e.defineProperty,n=e.createClass,r=e.typeof,o=e.createForOfIteratorHelper,a=e.classCallCheck,c=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){u=e.cclegacy,l=e._decorator,s=e.SpriteFrame,f=e.Vec3,v=e.Quat,y=e.Mat4,d=e.v3,h=e.tween,p=e.bezier,g=e.sys,m=e.native},function(e){k=e.LoadManager},function(e){x=e.CameraShake}],execute:function(){var S,M;u._RF.push({},"f89dcq1Qo5JlY5IGt5ulh4n","Tools",void 0);var C=l.ccclass;l.property,e("Tools",C("Tools")((t(M=function(){function e(){a(this,e)}var t;return n(e,null,[{key:"PrefixInteger",value:function(e,t){return(Array(t).join("0")+e).slice(-t)}},{key:"conversionTime",value:function(e){var t=e,n=new Date(t).getFullYear(),r=new Date(t).getMonth()+1,o=new Date(t).getDate(),a=new Date(t).getHours(),c=(a>9?"":"0")+a,i=new Date(t).getMinutes(),u=(i>9?"":"0")+i,l=new Date(t).getSeconds();return n+"-"+r+"-"+o+" "+c+":"+u+":"+((l>9?"":"0")+l)}},{key:"conversionFormat",value:function(t){var n=Math.floor(t/86400),r="",o=0;n>0?(r=n+"天  ",o=3600,t-=86400*n):o=3600;var a=Math.floor(t/o),c=Math.floor(t%o/60),i=Math.floor(t%o%60);return r+e.PrefixInteger(a,2)+":"+e.PrefixInteger(c,2)+":"+e.PrefixInteger(i,2)}},{key:"conversionDayTime",value:function(t){var n=Math.floor(t/86400),r="",o=0,a=!1;n>0?(r=n+"天",o=3600,t-=86400*n,a=!0):o=3600;var c=Math.floor(t/o),i=Math.floor(t%o/60),u=Math.floor(t%o%60),l=r+e.PrefixInteger(c,2)+"小时"+(a?"":e.PrefixInteger(i,2)+"分");return a||0!=c?a||0!=i||0!=c||(l=e.PrefixInteger(u,2)+"秒"):l=e.PrefixInteger(i,2)+"分"+e.PrefixInteger(u,2)+"秒",l}},{key:"SecondConversionFormat",value:function(e){var t="",n=Math.floor(e/3600);n>0&&(t+=n+"小时");var r=Math.floor(e%3600/60);r>0&&(t+=r+"分钟");var o=Math.floor(e%3600%60);return o>0&&(t+=o+"秒"),t}},{key:"MailTimeFormat",value:function(e){var t=new Date(e),n=t.getFullYear(),r=("0"+(t.getMonth()+1)).slice(-2),o=("0"+t.getDate()).slice(-2),a=("0"+t.getHours()).slice(-2),c=("0"+t.getMinutes()).slice(-2),i=("0"+t.getSeconds()).slice(-2);return"".concat(n,"年").concat(r,"月").concat(o,"日 ").concat(a,":").concat(c,":").concat(i)}},{key:"isInteger",value:function(e){return e%1==0}},{key:"compareObject",value:function(e,t){return JSON.stringify(e)==JSON.stringify(t)}},{key:"setString",value:function(e,t){e.string=t}},{key:"setRichTextString",value:function(e,t){e.string=t}},{key:"replaceString",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0,r=t.length;n<r;n++)e=e.replace("{"+n+"}",t[n]);return e}},{key:"setSpriteFrameFromBundle",value:function(e,t,n){k.instance._loadAsync(t,n,s).then((function(t){e.spriteFrame=t}))}},{key:"setSpriteFrame",value:function(e,t){e.spriteFrame=t}},{key:"convertToHoursMinutesSeconds",value:function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%60,o=t<10?"0".concat(t):"".concat(t),a=n<10?"0".concat(n):"".concat(n),c=r<10?"0".concat(r):"".concat(r);return"".concat(o,":").concat(a,":").concat(c)}},{key:"convertSecondsToTime",value:function(e){return e>=86400?"".concat((e/86400).toFixed(2)," 天"):e>=3600?"".concat((e/3600).toFixed(2)," 小时"):e>=60?"".concat((e/60).toFixed(2)," 分钟"):"".concat(e.toFixed(2)," 秒")}},{key:"clipboard",value:(t=c(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.isNative)m.copyTextToClipboard(t);else try{(n=document.createElement("input")).readOnly=!0,n.value=t,document.body.appendChild(n),n.select(),n.setSelectionRange(0,n.value.length),document.execCommand("Copy"),document.body.removeChild(n)}catch(e){console.log("[Error] clipboard ".concat(e))}case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"checkSimpleRankNameLength",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=t,r=0,o="",a=0,c=0;c<e.length;c++)e.charCodeAt(c)>255?a+=2:a++;for(var i=0;i<e.length;i++)r<=n&&(o+=e[i],e.charCodeAt(i)>255?r+=2:r++);return o+(a>n?"...":"")}},{key:"screenShake",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;x.Instance.TweenShake(e,t)}},{key:"getRandomValue",value:function(e,t){return Math.floor((t-e+1)*Math.random())+e}},{key:"deepClone",value:function(e){if(null===e||"object"!==r(e))return e;if(e instanceof f)return new f(e.x,e.y,e.z);if(e instanceof v)return new v(e.x,e.y,e.z,e.w);if(e instanceof y){var t=new y;return t.set(e),t}if(Array.isArray(e)){var n,a=[],c=o(e);try{for(c.s();!(n=c.n()).done;){var i=n.value;a.push(this.deepClone(i))}}catch(e){c.e(e)}finally{c.f()}return a}var u={};for(var l in e)e.hasOwnProperty(l)&&(u[l]=this.deepClone(e[l]));return u}},{key:"bezierTo",value:function(e,t,n,r,o,a,c){a=a||Object.create(null);return a.onUpdate=function(t,a){var i,u,l,s,f,v,y;e.position=(l=r,s=o,f=(1-(i=a))*(1-i)*(u=n).x+2*i*(1-i)*l.x+i*i*s.x,v=(1-i)*(1-i)*u.y+2*i*(1-i)*l.y+i*i*s.y,y=(1-i)*(1-i)*u.z+2*i*(1-i)*l.z+i*i*s.z,d(f,v,y)),a>=1&&c&&c()},h(e).to(t,{},a)}},{key:"cubicBezierTo",value:function(e,t,n,r,o,a,c){var i=n,u=r,l=o,s=a,f=d();return h(e).to(t,{position:s},{onUpdate:function(e,t){!function(e,t,n,r,o,a){a.x=p(t.x,n.x,r.x,o.x,e),a.y=p(t.y,n.y,r.y,o.y,e),a.z=p(t.z,n.z,r.z,o.z,e)}(t,i,u,l,s,f),e.setPosition(f),t>=1&&c&&c()}}).start()}},{key:"generateUUID",value:function(){var t=(new Date).getTime().toString(16),n=Math.floor(1e9*Math.random()).toString(16),r=(e.counter++%1e6).toString(16);return"".concat(t,"-").concat(n,"-").concat(r)}},{key:"quickSort",value:function(t){if(t.length<=1)return t;for(var n=Math.floor(t.length/2),r=t.splice(n,1)[0],o=[],a=[],c=0;c<t.length;c++)t[c]<r?o.push(t[c]):a.push(t[c]);return e.quickSort(o).concat([r],e.quickSort(a))}},{key:"onCopyCode",value:function(e,t){(function(){var e=c(i().mark((function e(n){var r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n+"",(o=document.createElement("input")).value=r,o.setAttribute("readonly",""),o.style.contain="strict",o.style.position="absolute",o.style.left="-100vw",o.style.fontSize="12px",document.body.appendChild(o),o.select(),o.selectionStart=0,o.selectionEnd=r.length,a=!1,e.prev=13,a=document.execCommand("copy")){e.next=20;break}return console.log("document.execCommand fail"),e.next=19,navigator.clipboard.writeText(n);case 19:t&&t.onSuccess&&t.onSuccess();case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(13),console.log(e.t0),t&&t.onFail&&t.onFail();case 26:return document.body.removeChild(o),e.abrupt("return",a);case 28:case"end":return e.stop()}}),e,null,[[13,22]])})));return function(t){return e.apply(this,arguments)}})()(e)}}]),e}(),"counter",0),S=M))||S);u._RF.pop()}}}));

System.register("chunks:///_virtual/TweenManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,a,t,c,r,s;return{setters:[function(e){n=e.defineProperty,a=e.createClass,t=e.classCallCheck},function(e){c=e.cclegacy,r=e._decorator,s=e.TweenSystem}],execute:function(){var u,l;c._RF.push({},"c2ef8VxOdNIz6QIQ04dfJZB","TweenManager",void 0);var i=r.ccclass;r.property,e("TweenManager",i("TweenManager")((n(l=function(){function e(){t(this,e)}return a(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"pauseAllNodeTween",value:function(e){s.instance.ActionManager.pauseTarget(e)}},{key:"resumeAllNodeTween",value:function(e){s.instance.ActionManager.resumeTarget(e)}}]),e}(),"instance",null),u=l))||u);c._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LoadManager.ts","./PrefabConfig.ts"],(function(e){var t,n,r,a,s,o,i,u,c,l,p,f;return{setters:[function(e){t=e.defineProperty,n=e.createClass,r=e.classCallCheck,a=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){o=e.cclegacy,i=e._decorator,u=e.isValid,c=e.instantiate},function(e){l=e.LoadManager},function(e){p=e.AssetsConfig,f=e.PrefabConfig}],execute:function(){var d,h;o._RF.push({},"0ed997OMSVPYb34fHvJqHDW","UIManager",void 0);var b=i.ccclass;i.property,e("UIManager",b("UIManger")((h=function(){function e(){r(this,e),t(this,"healthPrefab",void 0),t(this,"hitHealthPrefab",void 0),t(this,"bossHealthBarAtlas",void 0)}var o,i,d;return n(e,[{key:"init",value:(d=a(s().mark((function e(t){var n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.instance.preloadAllBundle().then(function(){var e=a(s().mark((function e(r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("LoadManager init finished"),console.log("UIManager init finished"),e.next=4,l.instance.loadAssetFromBundle(f.NodeMonsterHp.bundle,f.NodeMonsterHp.path,f.NodeMonsterHp.type);case 4:return n.healthPrefab=e.sent,e.next=7,l.instance.loadAssetFromBundle(f.LabelHitHealth.bundle,f.LabelHitHealth.path,f.NodeMonsterHp.type);case 7:return n.hitHealthPrefab=e.sent,e.next=10,l.instance.loadAssetFromBundle(p.atlasBossHealthBar.bundle,p.atlasBossHealthBar.path,p.atlasBossHealthBar.type);case 10:n.bossHealthBarAtlas=e.sent,t();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"createPrefab",value:(i=a(s().mark((function e(t,n,r){var a,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.instance.loadAssetFromBundle(n.bundle,n.path,n.type);case 2:if(a=e.sent,o=c(a),null==n.component){e.next=9;break}if(i=o.getComponent(n.component)){e.next=9;break}return console.error("component doesn't exist in prefab: "+n.bundle+"/"+n.path+"! component: "+n.component),e.abrupt("return",null);case 9:if(t&&u(t)){e.next=12;break}return console.error("parent doesn't exist"),e.abrupt("return",null);case 12:return o.parent=t,i.init&&"function"==typeof i.init&&i.init(r),n.startPos&&o.setPosition(n.startPos),e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"getPrefab",value:(o=a(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,l.instance.loadAssetFromBundle(t.bundle,t.path,t.type);case 3:if(e.t1=e.sent,!(n=(0,e.t0)(e.t1))){e.next=7;break}return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"nodeDestroy",value:function(e,t,n){e.destroy(),l.instance.realeaseAsset(t,n)}},{key:"tips",value:function(){}},{key:"ask",value:function(){}}],[{key:"instance",get:function(){return null==this._instance&&(this._instance=new e),this._instance}}]),e}(),t(h,"_instance",null),d=h))||d);o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});